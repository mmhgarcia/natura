ESTRUCTURA DEL PROYECTO: natura
==================================================

--- √ÅRBOL DE DIRECTORIOS ---
üìÅ .vercel/
  üìÑ README.txt
  üìÑ project.json
üìÑ README.md
üìÑ eslint.config.js
üìÑ index.html
üìÑ package.json
üìÑ project_reader.py
üìÅ public/
  üìÅ outputs/
    üìÅ small/
üìÅ src/
  üìÑ App.css
  üìÑ App.jsx
  üìÅ assets/
  üìÅ components/
    üìÑ Footer.jsx
    üìÑ GestionPedido.jsx
    üìÅ GruposCRUD/
      üìÑ GruposCRUD.jsx
      üìÑ ModalGrupo.jsx
    üìÑ Header.jsx
    üìÅ Panel/
      üìÑ Panel.jsx
      üìÑ Panel.module.css
      üìÅ hooks/
        üìÑ useGrupos.js
        üìÑ useProductos.jsx
    üìÑ Pedidos.jsx
    üìÅ ProductosCRUD/
      üìÑ ModalProducto.jsx
      üìÑ ProductosCRUD.jsx
    üìÑ Sidebar.jsx
    üìÑ TasaForm.jsx
    üìÑ TasaImporter.jsx
    üìÑ TasaList.jsx
  üìÅ data/
    üìÑ data.json
    üìÑ grupos.json
  üìÅ hooks/
    üìÑ useLocalStorageList.js
  üìÑ index.css
  üìÅ lib/
    üìÅ db/
      üìÑ database.js
      üìÅ hooks/
        üìÑ useTasa.js
        üìÑ useTasaBCV.js
      üìÑ index.js
      üìÅ repositories/
        üìÑ RepoRecommStructure.js
        üìÑ TasaRepository.js
      üìÅ schemas/
      üìÅ utils/
        üìÑ Importer.js
        üìÑ exportService.js
        üìÑ tasaUtil.js
    üìÅ types/
  üìÑ main.jsx
  üìÅ pages/
    üìÑ About.jsx
    üìÑ Admin.module.css
    üìÑ GruposPage.jsx
    üìÑ Home.jsx
    üìÑ Home.module.css
    üìÑ Lista.jsx
    üìÑ NotFound.jsx
    üìÑ Pedidos.jsx
    üìÑ ProductosPage.jsx
    üìÑ TasaBCV.jsx
    üìÑ TasaBCV.module.css
üìÑ vite.config.js

==================================================

--- CONTENIDO DE ARCHIVOS (SANITIZADO) ---

FILE: .vercel/README.txt
------------------------------
> Why do I have a folder named ".vercel" in my project?
The ".vercel" folder is created when you link a directory to a Vercel project.

> What does the "project.json" file contain?
The "project.json" file contains:
- The ID of the Vercel project that you linked ("projectId")
- The ID of the user or team your Vercel project is owned by ("orgId")

> Should I commit the ".vercel" folder?
No, you should not share the ".vercel" folder with anyone.
Upon creation, it will be automatically added to your ".gitignore" file.

**************************************************

FILE: .vercel/project.json
------------------------------
{"projectId":"prj_hjReYCHTcKVrtd3weTmPa3dKTGQl","orgId":"team_esiDhEy9BSjEtp80YsKI8dmT","projectName":"natura"}
**************************************************

FILE: README.md
------------------------------
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is enabled on this template. See [this documentation](https://react.dev/learn/react-compiler) for more information.

Note: This will impact Vite dev & build performances.

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.

**************************************************

FILE: eslint.config.js
------------------------------
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])

**************************************************

FILE: index.html
------------------------------
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>natura</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

**************************************************

FILE: package.json
------------------------------
{
  "name": "natura",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "dexie": "^4.2.1",
    "dexie-export-import": "^4.1.4",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.10.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "babel-plugin-react-compiler": "^1.0.0",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "vite": "^7.2.4"
  }
}

**************************************************

FILE: project_reader.py
------------------------------
import os
from pathlib import Path
import sys

# Configuraci√≥n de exclusiones seg√∫n las fuentes [4, 5]
IGNORE_DIRS = {'.git', 'node_modules', 'dist', 'build', '.next',
               '__pycache__', 'env', 'venv', '.idea', '.vscode'}
IGNORE_FILES = {'.DS_Store', '.env', '.env.*', 'package-lock.json',
                'yarn.lock', 'pnpm-lock.yaml', '*.log', '*.pid'}
ALLOWED_EXTENSIONS = {'.js', '.jsx', '.ts', '.tsx', '.css', '.scss',
                      '.html', '.json', '.md', '.py', '.txt', '.yml', '.yaml'}
MAX_FILE_SIZE = 1024 * 1024  # 1MB
[CONTENIDO SENSIBLE ELIMINADO: project_reader.py]

def should_ignore(path, root):
    """Determina si un archivo/directorio debe ser ignorado [8, 9]"""
    for part in path.parts:
        if part in IGNORE_DIRS:
            return True
    for pattern in IGNORE_FILES:
        if pattern.startswith('*') and path.name.endswith(pattern[1:]):
            return True
        elif path.name == pattern:
            return True
    if path.is_file() and path.suffix not in ALLOWED_EXTENSIONS:
        return True
    return False

def sanitize_content(content, filepath):
    """Elimina datos sensibles del contenido [6, 7]"""
    lines = content.split('\n')
    sanitized = []
    for line in lines:
        lower_line = line.lower()
        if any(pattern in lower_line for pattern in SENSITIVE_PATTERNS):
            sanitized.append(f"[CONTENIDO SENSIBLE ELIMINADO: {filepath}]")
            continue
        sanitized.append(line)
    return '\n'.join(sanitized)

def generate_project_summary(root_path, output_file):
    """Genera un resumen seguro del proyecto [1, 3]"""
    root = Path(root_path).resolve()
    
    # Asegurar que el directorio de destino exista (D:\NOTEBOOKLM\natura)
    output_path = Path(output_file)
    output_path.parent.mkdir(parents=True, exist_ok=True)

    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(f"ESTRUCTURA DEL PROYECTO: {root.name}\n")
        f.write("=" * 50 + "\n\n")
        
        f.write("--- √ÅRBOL DE DIRECTORIOS ---\n")
        dir_structure = []
        file_contents = []
        
        # Recorrido recursivo [10, 11]
        for path in sorted(root.rglob('*')):
            # Evitar leer el propio archivo de salida si est√° en el mismo root
            if should_ignore(path, root) or path.resolve() == output_path.resolve():
                continue
            
            depth = len(path.relative_to(root).parts) - 1
            indent = '  ' * depth
            if path.is_dir():
                dir_structure.append(f"{indent}üìÅ {path.name}/")
            else:
                dir_structure.append(f"{indent}üìÑ {path.name}")

            if path.is_file():
                try:
                    file_size = path.stat().st_size
                    if file_size > MAX_FILE_SIZE:
                        file_contents.append(f"\nFILE: {path.relative_to(root)}\n" + "-"*30 + 
                                           f"\n[ARCHIVO DEMASIADO GRANDE: {file_size} bytes]\n" + "*"*50)
                        continue
                    
                    content = path.read_text(encoding='utf-8', errors='ignore')
                    sanitized = sanitize_content(content, path.name)
                    file_contents.append(f"\nFILE: {path.relative_to(root)}\n" + "-"*30 + 
                                       f"\n{sanitized}\n" + "*"*50)
                except Exception as e:
                    file_contents.append(f"\n[ERROR leyendo {path.name}: {e}]")
        
        f.write('\n'.join(dir_structure))
        f.write("\n\n" + "=" * 50 + "\n\n")
        f.write("--- CONTENIDO DE ARCHIVOS (SANITIZADO) ---\n")
        f.write('\n'.join(file_contents))

def main():
    current_dir = Path.cwd()
    print(f"Directorio a analizar: {current_dir}")
    response = input("¬øContinuar? (s/n): ").strip().lower()
    if response != 's':
        print("Operaci√≥n cancelada")
        return

    # RUTA SOLICITADA: Uso de prefijo 'r' para evitar errores de escape en Windows
    output_filename = "proyecto_completo.txt"

    try:
        print(f"Analizando proyecto...")
        generate_project_summary(current_dir, output_filename)
        print(f"‚úì Proceso finalizado. Resultado en: {output_filename}")
    except Exception as e:
        print(f"‚úó Error: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
**************************************************

FILE: src/App.css
------------------------------
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

**************************************************

FILE: src/App.jsx
------------------------------
import { Routes, Route } from "react-router-dom";
import Home from "./pages/Home";
import Lista from "./pages/Lista";
import About from "./pages/About";
import NotFound from "./pages/NotFound";
import Panel from "./components/Panel/Panel";
import TasaBCV from "./pages/TasaBCV";
import Header from "./components/Header";
import Footer from "./components/Footer";
import GruposPage from './pages/GruposPage';
import ProductosPage from './pages/ProductosPage';
// Nueva importaci√≥n de la p√°gina de Pedidos
import PedidosPage from './pages/Pedidos'; 

function App() {
  return (
    <>
      <Header />
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/lista" element={<Lista />} />
        <Route path="/about" element={<About />} />
        <Route path="/Panel" element={<Panel />} />
        <Route path="/tasabcv" element={<TasaBCV />} />
        <Route path="/admingrupos" element={<GruposPage />} />
        <Route path="/adminproductos" element={<ProductosPage />} />
        {/* Nueva ruta para Pedidos */}
        <Route path="/pedidos" element={<PedidosPage />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
      <Footer />
    </>
  );
}

export default App;
**************************************************

FILE: src/components/Footer.jsx
------------------------------
export default function Footer() {
  return (
    <footer style={{ textAlign: "center", padding: "16px 0", color: "#555" }}>
      ¬© {new Date().getFullYear()} - Natura-Ice
    </footer>
  );
}

**************************************************

FILE: src/components/GestionPedido.jsx
------------------------------
import React, { useState, useEffect } from 'react';
import { db } from '../lib/db/database'; // Acceso a la base de datos dbTasaBCV [2, 4]

const GestionPedido = ({ pedido, onClose, onSave }) => {
  const [formData, setFormData] = useState({
    numero_pedido: '',
    // Se inicializa con la fecha actual en formato string YYYY-MM-DD [1]
    fecha_pedido: new Date().toISOString().split('T'),
    tasa: '', 
    estatus: 'Activo' 
  });
  
  const [productos, setProductos] = useState([]);
  const [listaGrupos, setListaGrupos] = useState([]);
  const [cantidades, setCantidades] = useState({});
  const [error, setError] = useState('');

  // Modo visualizaci√≥n: true si el componente recibe un pedido por props [5]
  const esVisualizacion = !!pedido; 

  useEffect(() => {
    const cargarDatos = async () => {
      try {
        // 1. Cargar la tasa BCV y datos maestros [5-7]
        const tasaConfig = await db.getConfigValue('tasa');
        const [todosLosProductos, todosLosGrupos] = await Promise.all([
          db.getAll('productos'),
          db.getAll('grupos')
        ]);

        setProductos(todosLosProductos);
        setListaGrupos(todosLosGrupos);

        // 2. L√≥gica de inicializaci√≥n seg√∫n el modo
        if (pedido) {
          // MODO VISUALIZACI√ìN: Cargar datos del pedido seleccionado [5]
          setFormData({
            numero_pedido: pedido.numero_pedido || '',
            fecha_pedido: pedido.fecha_pedido || '',
            tasa: pedido.tasa || (tasaConfig ? tasaConfig.toString() : ''),
            estatus: pedido.estatus || 'Activo'
          });
          if (pedido.items) setCantidades(pedido.items);
        } else {
          // MODO CREACI√ìN: Fecha del d√≠a autom√°tica y estrategia de numeraci√≥n [8, 9]
          const hoy = new Date().toISOString().split('T');
          
          // Buscar el √∫ltimo pedido para incrementar el n√∫mero [Estrategia Recomendada]
          const ultimoPedido = await db.pedidos.orderBy('id').last();
          const siguienteNumero = ultimoPedido 
            ? (parseInt(ultimoPedido.numero_pedido) + 1).toString() 
            : "1";
          
          setFormData(prev => ({
            ...prev,
            numero_pedido: siguienteNumero,
            fecha_pedido: hoy, // Establece la fecha del d√≠a autom√°ticamente
            tasa: tasaConfig ? tasaConfig.toString() : ''
          }));
        }
      } catch (err) {
        console.error("Error al cargar datos iniciales:", err);
      }
    };
    cargarDatos();
  }, [pedido]);

  // C√°lculo de totales basado en costo_$ del grupo [3, 10, 11]
  const calcularTotales = () => {
    let totalUSD = 0;
    Object.entries(cantidades).forEach(([prodId, qty]) => {
      const producto = productos.find(p => p.id === parseInt(prodId));
      if (producto && qty > 0) {
        const grupo = listaGrupos.find(g => g.nombre.toLowerCase() === producto.grupo.toLowerCase());
        const costo = grupo ? (grupo.costo_$ || 0) : 0;
        totalUSD += qty * costo;
      }
    });
    const tasaNum = parseFloat(formData.tasa) || 0;
    return { usd: totalUSD, bs: totalUSD * tasaNum };
  };

  const { usd, bs } = calcularTotales();

  const handleIncrement = (id) => {
    if (esVisualizacion) return;
    setCantidades(prev => ({ ...prev, [id]: (prev[id] || 0) + 1 })); // [11]
  };

  const handleDecrement = (id) => {
    if (esVisualizacion) return;
    setCantidades(prev => ({ ...prev, [id]: Math.max(0, (prev[id] || 0) - 1) })); // [11]
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (esVisualizacion) return;
    try {
      const pedidoData = { 
        ...formData, 
        items: cantidades, 
        total_usd: usd, 
        total_bs: bs 
      };
      // Persistencia en IndexedDB [12-14]
      await db.add('pedidos', pedidoData);
      onSave();
      onClose();
    } catch (err) {
      setError('Error al grabar el pedido: ' + err.message);
    }
  };

  const getCostoGrupo = (nombreGrupo) => {
    const grupo = listaGrupos.find(g => g.nombre.toLowerCase() === nombreGrupo.toLowerCase());
    return grupo ? (grupo.costo_$ ? grupo.costo_$.toFixed(2) : "0.00") : "0.00"; // [15]
  };

  const productosAgrupados = productos.reduce((acc, prod) => {
    const grupo = prod.grupo || 'Otros';
    if (!acc[grupo]) acc[grupo] = [];
    acc[grupo].push(prod);
    return acc;
  }, {}); // [15]

  return (
    <div style={styles.overlay}>
      <div style={styles.modal}>
        <div style={styles.header}>
          <h2 style={styles.title}>GESTI√ìN DE PEDIDOS</h2>
          <button onClick={onClose} style={styles.closeButton}>√ó</button>
        </div>

        <form onSubmit={handleSubmit} style={styles.content}>
          <div style={styles.topRow}>
            <div style={styles.inputGroup}>
              <label style={styles.label}>Pedido # (Auto)</label>
              <input type="text" value={formData.numero_pedido} style={styles.inputReadOnly} readOnly />
            </div>
            <div style={styles.inputGroup}>
              <label style={styles.label}>Fecha</label>
              <input 
                type="date" 
                value={formData.fecha_pedido} 
                onChange={(e) => setFormData({...formData, fecha_pedido: e.target.value})} 
                style={esVisualizacion ? styles.inputReadOnly : styles.inputSmall} 
                disabled={esVisualizacion} // Deshabilitado en modo visualizaci√≥n
              />
            </div>
            <div style={styles.inputGroup}>
              <label style={styles.label}>Tasa (BCV)</label>
              <input type="text" value={formData.tasa} style={styles.inputReadOnly} readOnly />
            </div>
          </div>

          <div style={styles.totalsBar}>
            <div style={styles.totalBox}>
              <span style={styles.totalLabel}>Total $:</span>
              <span style={styles.totalValue}>{usd.toFixed(2)}</span>
            </div>
            <div style={styles.totalBox}>
              <span style={styles.totalLabel}>Total Bs:</span>
              <span style={styles.totalValue}>{bs.toFixed(2)}</span>
            </div>
          </div>

          <div style={styles.productListContainer}>
            <div style={styles.productListHeader}>Lista de Productos</div>
            <div style={styles.productList}>
              {Object.entries(productosAgrupados).map(([grupo, items]) => (
                <div key={grupo}>
                  <div style={styles.groupTitle}>
                    {grupo.toUpperCase()} 
                    <span style={styles.groupPrice}> (${getCostoGrupo(grupo)})</span>
                  </div>
                  {items.map((prod) => (
                    <div key={prod.id} style={styles.productItem}>
                      <div style={styles.productName}>
                        <strong>{prod.nombre}</strong> <small>(ID: {prod.id})</small>
                      </div>
                      <div style={styles.productDetails}>
                        <span style={styles.stockText}>Stock: {prod.stock}</span>
                        <div style={styles.quantityControl}>
                          <button type="button" onClick={() => handleDecrement(prod.id)} style={styles.qtyBtn} disabled={esVisualizacion}>-</button>
                          <input 
                            type="number" 
                            value={cantidades[prod.id] || 0}
                            onChange={(e) => !esVisualizacion && setCantidades({...cantidades, [prod.id]: parseInt(e.target.value) || 0})}
                            style={styles.qtyInput}
                            disabled={esVisualizacion}
                          />
                          <button type="button" onClick={() => handleIncrement(prod.id)} style={styles.qtyBtn} disabled={esVisualizacion}>+</button>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              ))}
            </div>
          </div>

          <div style={styles.footer}>
            <button 
              type="button" 
              onClick={() => setCantidades({})} 
              style={{...styles.limpiarBtn, opacity: esVisualizacion ? 0.5 : 1}} 
              disabled={esVisualizacion}
            >
              Limpiar
            </button>
            <button 
              type="submit" 
              style={{...styles.grabarBtn, opacity: esVisualizacion ? 0.5 : 1}} 
              disabled={esVisualizacion}
            >
              Grabar
            </button>
          </div>
          {error && <div style={styles.error}>{error}</div>}
        </form>
      </div>
    </div>
  );
};

const styles = {
  overlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000 }, // [16]
  modal: { backgroundColor: '#fff', width: '95%', maxWidth: '500px', maxHeight: '95vh', border: '1px solid #ccc', padding: '10px', borderRadius: '4px', display: 'flex', flexDirection: 'column' }, // [16]
  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderBottom: '2px solid #00BFFF', marginBottom: '10px' }, // [17]
  title: { fontSize: '16px', fontWeight: 'bold', color: '#000', margin: 0 }, // [17]
  closeButton: { background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: '#000' }, // [17]
  content: { display: 'flex', flexDirection: 'column', gap: '10px' }, // [17]
  topRow: { display: 'flex', gap: '8px', justifyContent: 'space-between' }, // [17]
  inputGroup: { display: 'flex', flexDirection: 'column', flex: 1, gap: '4px' }, // [18]
  label: { fontSize: '12px', fontWeight: 'bold', color: '#000' }, // [18]
  inputSmall: { padding: '6px', border: '1px solid #aaa', fontSize: '13px', color: '#000', backgroundColor: '#fff', width: '100%', boxSizing: 'border-box' }, // [18]
  inputReadOnly: { padding: '6px', border: '1px solid #ccc', fontSize: '13px', color: '#555', backgroundColor: '#f0f0f0', width: '100%', boxSizing: 'border-box', cursor: 'not-allowed' }, // [18]
  totalsBar: { display: 'flex', gap: '10px', justifyContent: 'space-between', padding: '5px 0' }, // [19]
  totalBox: { flex: 1, display: 'flex', justifyContent: 'space-between', alignItems: 'center', backgroundColor: '#e1f5fe', padding: '8px', border: '1px solid #00BFFF', borderRadius: '4px' }, // [19]
  totalLabel: { fontSize: '13px', fontWeight: 'bold', color: '#000' }, // [19]
  totalValue: { fontSize: '14px', fontWeight: 'bold', color: '#007bff' }, // [19]
  productListContainer: { border: '1px solid #aaa', borderRadius: '2px' }, // [19]
  productListHeader: { textAlign: 'center', color: '#00BFFF', padding: '5px', borderBottom: '1px solid #aaa', fontWeight: 'bold' }, // [20]
  productList: { height: '275px', overflowY: 'auto', backgroundColor: '#fff' }, // [20]
  groupTitle: { fontSize: '18px', fontWeight: 'bold', backgroundColor: '#f1f1f1', padding: '8px 10px', color: '#000', display: 'flex', justifyContent: 'space-between' }, // [20]
  groupPrice: { color: '#007bff', fontSize: '16px' }, // [20]
  productItem: { padding: '8px 10px', borderBottom: '1px solid #eee' }, // [20]
  productName: { fontSize: '14px', color: '#000' }, // [21]
  productDetails: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' }, // [21]
  stockText: { fontSize: '12px', color: '#333' }, // [21]
  quantityControl: { display: 'flex', alignItems: 'center', gap: '4px' }, // [21]
  qtyBtn: { width: '30px', height: '30px', backgroundColor: '#eee', border: '1px solid #ccc', cursor: 'pointer', fontWeight: 'bold', fontSize: '18px', color: '#000', display: 'flex', alignItems: 'center', justifyContent: 'center' }, // [21]
  qtyInput: { width: '40px', textAlign: 'center', border: '1px solid #ccc', padding: '4px', color: '#000', backgroundColor: '#fff' }, // [22]
  footer: { display: 'flex', gap: '15px', marginTop: '5px' }, // [22]
  limpiarBtn: { backgroundColor: '#f44336', color: 'white', border: 'none', padding: '10px 25px', borderRadius: '4px', fontWeight: 'bold', cursor: 'pointer', flex: 1 }, // [22]
  grabarBtn: { backgroundColor: '#28a745', color: 'white', border: 'none', padding: '10px 25px', borderRadius: '4px', fontWeight: 'bold', cursor: 'pointer', flex: 1 }, // [22]
  error: { color: 'red', fontSize: '12px', textAlign: 'center' }
};

export default GestionPedido;
**************************************************

FILE: src/components/GruposCRUD/GruposCRUD.jsx
------------------------------
import React, { useState, useEffect } from 'react';
import { db } from '../../lib/db/database'; // Acceso a la instancia dbTasaBCV [4]
import ModalGrupo from './ModalGrupo';

const GruposCRUD = () => {
  const [grupos, setGrupos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const [modalOpen, setModalOpen] = useState(false);
  const [grupoEditando, setGrupoEditando] = useState(null);

  // Carga inicial de los grupos desde IndexedDB [5, 6]
  useEffect(() => {
    cargarGrupos();
  }, []);

  const cargarGrupos = async () => {
    try {
      setLoading(true);
      // Obtiene todos los registros de la tabla 'grupos' [7, 8]
      const datos = await db.getAll('grupos');
      setGrupos(datos);
    } catch (err) {
      setError('Error al cargar los grupos: ' + err.message);
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  const handleEditar = (grupo) => {
    setGrupoEditando(grupo);
    setModalOpen(true); // Abre el modal para edici√≥n [7, 8]
  };

  const handleEliminar = async (grupo) => {
    if (window.confirm(`¬øEst√°s seguro de eliminar el grupo "${grupo.nombre}"?`)) {
      try {
        // Verifica integridad referencial antes de eliminar [8, 9]
        const productosConGrupo = await db.getAll('productos', { grupo: grupo.nombre });
        if (productosConGrupo.length > 0) {
          alert(`No se puede eliminar. Hay ${productosConGrupo.length} producto(s) usando este grupo.`);
          return;
        }
        await db.del('grupos', grupo.id);
        cargarGrupos(); // Refresca la lista tras eliminar [1, 9]
      } catch (err) {
        setError('Error al eliminar: ' + err.message);
      }
    }
  };

  const handleNuevoGrupo = () => {
    setGrupoEditando(null);
    setModalOpen(true); // Abre el modal para nuevo registro [1, 9]
  };

  if (loading) return <div style={styles.loading}>Cargando grupos...</div>;

  return (
    <div style={styles.container}>
      {/* T√≠tulo actualizado y color blanco para visibilidad [1, 2] */}
      <h1 style={styles.title}>Panel de Grupos</h1>

      {error && <div style={styles.errorAlert}>{error}</div>}

      <button onClick={handleNuevoGrupo} style={styles.nuevoButton}>
        + Agregar Nuevo Grupo
      </button>

      <div style={styles.lista}>
        {grupos.length === 0 ? (
          <div style={styles.vacio}>No hay grupos registrados.</div>
        ) : (
          grupos.map(grupo => (
            <div key={grupo.id} style={styles.item}>
              <div style={styles.itemInfo}>
                <div style={styles.itemNombre}>{grupo.nombre}</div>
                {/* Visualizaci√≥n de Precio y nuevo campo Costo [10, 11] */}
                <div style={styles.itemPrecio}>Precio: ${grupo.precio.toFixed(2)}</div>
                <div style={styles.itemCosto}>
                  Costo: ${grupo.costo_$ ? grupo.costo_$.toFixed(2) : "0.00"}
                </div>
                <div style={styles.itemId}>ID: {grupo.id}</div>
              </div>
              <div style={styles.itemActions}>
                <button onClick={() => handleEditar(grupo)} style={styles.btnEditar}>Editar</button>
                <button onClick={() => handleEliminar(grupo)} style={styles.btnEliminar}>Eliminar</button>
              </div>
            </div>
          ))
        )}
      </div>

      <div style={styles.resumen}>
        Total: {grupos.length} grupo{grupos.length !== 1 ? 's' : ''}
      </div>

      {/* Renderizado condicional del Modal para evitar duplicidad [10, 12] */}
      {modalOpen && (
        <ModalGrupo 
          grupo={grupoEditando} 
          onClose={() => setModalOpen(false)} 
          onSave={cargarGrupos} 
        />
      )}
    </div>
  );
};

const styles = {
  container: { padding: '20px', maxWidth: '800px', margin: '0 auto' },
  // Estilo corregido: Blanco para contrastar con el fondo oscuro #242424 [2, 13]
  title: { marginBottom: '20px', color: '#ffffff', fontWeight: 'bold', textAlign: 'center' },
  loading: { padding: '40px', textAlign: 'center', color: '#fff' },
  errorAlert: { backgroundColor: '#fee', color: '#c33', padding: '10px', borderRadius: '4px', marginBottom: '20px' },
  nuevoButton: { marginBottom: '20px', padding: '10px 15px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontWeight: '500' },
  lista: { border: '1px solid #ddd', borderRadius: '4px', overflow: 'hidden', marginBottom: '20px' },
  vacio: { padding: '40px', textAlign: 'center', color: '#666' },
  item: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '15px', borderBottom: '1px solid #eee', backgroundColor: 'white' },
  itemInfo: { flex: 1 },
  itemNombre: { fontWeight: 'bold', fontSize: '18px', marginBottom: '5px', color: '#333' },
  itemPrecio: { color: '#007bff', marginBottom: '3px', fontWeight: '500' },
  // Estilo espec√≠fico para el campo de costo en rojo [11]
  itemCosto: { color: '#dc3545', marginBottom: '3px', fontWeight: '500' },
  itemId: { fontSize: '12px', color: '#999' },
  itemActions: { display: 'flex', gap: '10px' },
  btnEditar: { padding: '8px 12px', backgroundColor: '#2196F3', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' },
  btnEliminar: { padding: '8px 12px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' },
  resumen: { marginTop: '20px', padding: '10px', backgroundColor: '#f5f5f5', borderRadius: '4px', fontSize: '14px', textAlign: 'center', color: '#333' }
};

export default GruposCRUD;
**************************************************

FILE: src/components/GruposCRUD/ModalGrupo.jsx
------------------------------
import React, { useState, useEffect } from 'react';
import { db } from '../../lib/db/database';

const ModalGrupo = ({ grupo, onClose, onSave }) => {
  const [formData, setFormData] = useState({
    nombre: '',
    precio: 0,
    costo_$: 0
  });

  useEffect(() => {
    if (grupo) {
      setFormData({
        nombre: grupo.nombre || '',
        precio: grupo.precio || 0,
        costo_$: grupo.costo_$ || 0
      });
    }
  }, [grupo]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      if (grupo) {
        await db.put('grupos', { id: grupo.id, ...formData });
      } else {
        await db.add('grupos', formData);
      }
      onSave();
      onClose();
    } catch (err) {
      alert('Error al guardar: ' + err.message);
    }
  };

  return (
    <div style={modalStyles.overlay}>
      <div style={modalStyles.modal}>
        <h2 style={{color: '#000'}}>GESTI√ìN DE GRUPO</h2>
        <form onSubmit={handleSubmit}>
          <div style={modalStyles.field}>
            <label style={{color: '#000'}}>Nombre:</label>
            <input 
              type="text" 
              value={formData.nombre} 
              onChange={e => setFormData({...formData, nombre: e.target.value})}
              required 
            />
          </div>
          <div style={modalStyles.field}>
            <label style={{color: '#000'}}>Precio ($):</label>
            <input 
              type="number" 
              step="0.01"
              value={formData.precio} 
              onChange={e => setFormData({...formData, precio: parseFloat(e.target.value)})}
            />
          </div>
          <div style={modalStyles.field}>
            <label style={{color: '#000'}}>Costo ($):</label>
            <input 
              type="number" 
              step="0.01"
              value={formData.costo_$} 
              onChange={e => setFormData({...formData, costo_$: parseFloat(e.target.value)})}
            />
          </div>
          <div style={{display: 'flex', gap: '10px', marginTop: '20px'}}>
            <button type="submit" style={{backgroundColor: '#28a745', color: '#fff'}}>Guardar</button>
            <button type="button" onClick={onClose} style={{backgroundColor: '#ccc'}}>Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  );
};

const modalStyles = {
  overlay: { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: 'rgba(0,0,0,0.5)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 3000 },
  modal: { backgroundColor: '#fff', padding: '20px', borderRadius: '8px', width: '90%', maxWidth: '400px' },
  field: { display: 'flex', flexDirection: 'column', marginBottom: '10px' }
};

export default ModalGrupo;
**************************************************

FILE: src/components/Header.jsx
------------------------------
import React, { useState } from 'react';
import Sidebar from './Sidebar';

export default function Header() {
    const [isMenuOpen, setIsMenuOpen] = useState(false);

    return (
        <header style={styles.header}>
            <div style={styles.nav}>
                {/* Bot√≥n Tipo Side Menu (Hamburguesa) */}
                <button 
                    onClick={() => setIsMenuOpen(true)} 
                    style={styles.menuBtn}
                >
                    ‚ò∞
                </button>
                
                <h1 style={styles.brand}>Natura Ice</h1>
                <div style={{ width: '40px' }} /> {/* Espaciador para centrar t√≠tulo */}
            </div>

            <Sidebar 
                isOpen={isMenuOpen} 
                onClose={() => setIsMenuOpen(false)} 
            />
        </header>
    );
}

const styles = {
    header: {
        padding: '0.5rem 1rem',
        backgroundColor: '#f8f9fa',
        borderBottom: '1px solid #dee2e6',
        position: 'sticky',
        top: 0,
        zIndex: 999
    },
    nav: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center'
    },
    menuBtn: {
        fontSize: '1.8rem',
        background: 'none',
        border: 'none',
        color: '#007bff',
        cursor: 'pointer'
    },
    brand: {
        fontSize: '1.8rem',
        margin: 0,
        color: '#333',
        fontWeight: 'bold'
    }
};
**************************************************

FILE: src/components/Panel/Panel.jsx
------------------------------
import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useGrupos } from "./hooks/useGrupos";
import { useProductos } from "./hooks/useProductos";
import { exportDatabase } from "../../lib/db/utils/exportService"; // Importar servicio
import styles from "./Panel.module.css";

export default function Panel() {
    const navigate = useNavigate();
    const { importarGrupos } = useGrupos();
    const { importarProductos } = useProductos();
    const [isExporting, setIsExporting] = useState(false);

    const handleExport = async () => {
        setIsExporting(true);
        const result = await exportDatabase();
        if (result.success) {
            alert("‚úÖ Copia de seguridad guardada en Descargas");
        } else {
            alert("‚ùå Error al exportar: " + (result.error?.message || "Error desconocido"))
        }
        setIsExporting(false);
    };

    return (
        <div className={styles.container}>
            <h1 className={styles.title}>PANEL DE CONTROL</h1>

            <div className={styles.buttons}>
                <button className={`${styles.button} ${styles.primary}`} onClick={handleExport} disabled={isExporting}>
                    {isExporting ? "‚åõ Exportando..." : "üì§ Exportar DB"}
                </button>

                <button className={`${styles.button} ${styles.primary}`} onClick={importarGrupos}>
                    üì• Cargar Datos Iniciales
                </button>

                <button className={styles.button} onClick={() => navigate("/tasabcv")}>Tasa BCV</button>
                <button className={styles.button} onClick={() => navigate("/admingrupos")}>Grupos</button>
                <button className={styles.button} onClick={() => navigate("/adminproductos")}>Productos</button>

                <button className={`${styles.button} ${styles.back}`} onClick={() => navigate("/")}>
                    ‚Ü©Ô∏è Regresar
                </button>
            </div>
        </div>
    );
}
**************************************************

FILE: src/components/Panel/Panel.module.css
------------------------------
/* Ocupa todo el ancho y alto de la pantalla */
.container {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;   /* centra verticalmente */
  align-items: center;       /* centra horizontalmente */
  background: #fafafa;
}

/* T√≠tulo */
.title {
  font-size: 2rem;
  margin-bottom: 40px;
  font-weight: bold;
  color: #333;
}

/* Contenedor de los botones para mantenerlos centrados */
.buttons {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Botones */
.button {
  width: 75%;
  max-width: 300px;
  padding: 14px 0;
  margin: 10px 0;
  font-size: 1.1rem;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #007bff;
  color: white;
  transition: background 0.25s;
}

.button:hover {
  background: #005fcc;
}

/* Bot√≥n Regresar */
.back {
  background: #555;
}

.back:hover {
  background: #333;
}

**************************************************

FILE: src/components/Panel/hooks/useGrupos.js
------------------------------
// src/components/Panel/hooks/useGrupos.js
import { useState } from 'react';
import gruposData from '../../../data/grupos.json';
import { db } from '../../../lib/db/database.js'; 

export function useGrupos() {
  
  const [error, setError] = useState(null);

  const importarGrupos = async () => { 
          
    try {
              
      // 1. CONVERTIR {clave:valor} a [{nombre, precio}]
      const gruposArray = Object.entries(gruposData).map(([nombre, precio]) => ({
        nombre: nombre,
        precio: Number(precio)
      }));
  
      // 2. LIMPIAR TABLA
      await db.grupos.clear();
 
      // 3. INSERTAR NUEVOS DATOS
      await db.grupos.bulkAdd(gruposArray);
  
      return {
        success: true,
        count: gruposArray.length,
        message: `${gruposArray.length} grupos importados`
      };
  
    } catch (error) {
      console.error('Error en importaci√≥n:', error);
      return {
        success: false,
        error: error.message
      };
    }
  }
  

  const verificarGrupos = async () => {
    try {
      const { db } = await import('../../../lib/db/database.js');
      const grupos = await db.grupos.toArray();
      
      return {
        success: true,
        data: grupos,
        count: grupos.length,
        message: `${grupos.length} grupos encontrados`
      };
    } catch (err) {
      console.error('Error verificando grupos:', err);
      return {
        success: false,
        error: err.message,
        data: []
      };
    }
  };

  return {
    importarGrupos,
    verificarGrupos,    
    error,
    clearError: () => setError(null)
  };
}
**************************************************

FILE: src/components/Panel/hooks/useProductos.jsx
------------------------------
// src/components/Panel/hooks/useProductos.js
import { useState } from 'react';
import productosData from '../../../data/data.json';
import { db } from '../../../lib/db/database.js'; // Import normal

export function useProductos() {
  const [error, setError] = useState(null);

const importarProductos = async () => {
  try {
    // 1. OBTENER EL ARRAY DE PRODUCTOS
    // Accedemos a la propiedad "productos" del objeto
    const productosArray = productosData.productos;
    
    // Si necesitas asegurar que cada producto tenga un campo createdAt
    const productosConFecha = productosArray.map(producto => ({
      ...producto,
      createdAt: producto.createdAt || new Date().toISOString() // Fecha actual si no existe
    }));

    // 2. LIMPIAR TABLA
    await db.productos.clear();

    // 3. INSERTAR NUEVOS DATOS
    await db.productos.bulkAdd(productosConFecha);

    console.log(`Importando ${productosConFecha.length} productos...`);

    return {
      success: true,
      count: productosConFecha.length,
      total: productosConFecha.length,
      message: `${productosConFecha.length} productos importados exitosamente.`
    };

  } catch (error) {
    console.error('Error en importaci√≥n de productos:', error);
    return {
      success: false,
      error: error.message
    };
  }
};

  const verificarProductos = async () => {
  };

  return {
    importarProductos,
    verificarProductos,
    error
  };
}
**************************************************

FILE: src/components/Pedidos.jsx
------------------------------
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { db } from '../lib/db/database'; 
import GestionPedido from './GestionPedido';

const PedidosComponente = () => {
  const navigate = useNavigate();
  const [listaPedidos, setListaPedidos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [modalOpen, setModalOpen] = useState(false);
  const [pedidoSeleccionado, setPedidoSeleccionado] = useState(null);

  const cargarRegistros = async () => {
    try {
      setLoading(true);
      const datos = await db.getAll('pedidos'); 
      setListaPedidos(datos);
    } catch (error) {
      console.error("Error al cargar pedidos:", error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    cargarRegistros();
  }, []);

  const handleNuevoPedido = () => {
    setPedidoSeleccionado(null);
    setModalOpen(true);
  };

  const handleSeleccionarPedido = (pedido) => {
    if (pedido.estatus === 'Activo' || !pedido.estatus) {
      setPedidoSeleccionado(pedido);
      setModalOpen(true);
    } else {
      alert("Solo se permite editar pedidos en estado Activo.");
    }
  };

  // L√≥gica actualizada para incrementar stock y cerrar pedido
  const handleRecibir = async (pedido, e) => {
    e.stopPropagation(); 
    
    const confirmar = window.confirm(`¬øDesea procesar el ingreso de mercanc√≠a del pedido ${pedido.numero_pedido}? Esto incrementar√° el stock actual.`);
    
    if (confirmar) {
      try {
        // 1. Recorrer los items del pedido para incrementar el stock
        // El objeto pedido.items contiene { productoId: cantidad }
        if (pedido.items && Object.keys(pedido.items).length > 0) {
          for (const [prodId, qty] of Object.entries(pedido.items)) {
            const cantidadNum = parseInt(qty);
            if (cantidadNum > 0) {
              // Incrementamos el stock usando el m√©todo de la base de datos
              await db.updateStock(parseInt(prodId), cantidadNum);
            }
          }
        }

        // 2. Una vez actualizado el stock, marcamos el pedido como 'Cerrado'
        await db.put('pedidos', { ...pedido, estatus: 'Cerrado' });
        
        // 3. Notificar √©xito al usuario
        alert("‚úÖ Pedido procesado exitosamente. El stock ha sido actualizado.");
        
        // 4. Refrescar la lista de pedidos en pantalla
        cargarRegistros();
      } catch (error) {
        console.error("Error al procesar el pedido:", error);
        alert("‚ùå Error cr√≠tico al procesar el pedido: " + error.message);
      }
    }
  };

  const styles = {
    container: { display: 'flex', flexDirection: 'column', width: '100%', minHeight: '100vh', backgroundColor: '#fff', margin: 0, padding: 0, boxSizing: 'border-box' },
    header: { display: 'flex', alignItems: 'center', padding: '15px', backgroundColor: '#00BFFF', color: 'white', width: '100%', boxSizing: 'border-box' },
    backArrow: { background: 'none', border: 'none', color: 'white', fontSize: '24px', cursor: 'pointer', marginRight: '10px' },
    title: { fontSize: '20px', fontWeight: 'bold', margin: 0 },
    content: { padding: '20px', display: 'flex', flexDirection: 'column', width: '100%', boxSizing: 'border-box' },
    addBtnCircle: { width: '55px', height: '55px', borderRadius: '50%', backgroundColor: '#28a745', color: 'white', border: 'none', fontSize: '35px', display: 'flex', justifyContent: 'center', alignItems: 'center', cursor: 'pointer', marginBottom: '20px', boxShadow: '0 2px 5px rgba(0,0,0,0.2)', padding: 0, lineHeight: 0 },
    headerRow: { display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', backgroundColor: '#f4f4f4', borderBottom: '2px solid #ddd', padding: '10px 5px' },
    headerCell: { fontWeight: 'bold', fontSize: '13px', color: '#333', textAlign: 'left' },
    listaContainer: { width: '100%' },
    row: { display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', borderBottom: '1px solid #eee', cursor: 'pointer', alignItems: 'center' },
    cell: { padding: '15px 5px', textAlign: 'left', color: '#000', fontSize: '14px' },
    btnRecibir: { backgroundColor: '#28a745', color: 'white', border: 'none', padding: '8px 10px', borderRadius: '4px', fontSize: '12px', cursor: 'pointer', fontWeight: 'bold' },
    estatusCerrado: { color: '#666', fontStyle: 'italic', fontSize: '13px' }
  };

  return (
    <div style={styles.container}>
      <div style={styles.header}>
        <button onClick={() => navigate(-1)} style={styles.backArrow}>‚Üê</button>
        <h1 style={styles.title}>Pedidos</h1>
      </div>

      <div style={styles.content}>
        <button style={styles.addBtnCircle} onClick={handleNuevoPedido}>+</button>

        <div style={styles.headerRow}>
          <div style={styles.headerCell}>PEDIDO</div>
          <div style={styles.headerCell}>FECHA</div>
          <div style={styles.headerCell}>TOTAL BS</div>
          <div style={styles.headerCell}>ACCI√ìN</div>
        </div>

        <div style={styles.listaContainer}>
          {loading ? (
            <div style={{ textAlign: 'center', color: '#666', marginTop: '20px' }}>Cargando registros...</div>
          ) : (
            listaPedidos.map((p) => (
              <div key={p.id} style={styles.row} onClick={() => handleSeleccionarPedido(p)}>
                <div style={styles.cell}><strong>{p.numero_pedido}</strong></div>
                <div style={styles.cell}>{new Date(p.fecha_pedido).toLocaleDateString()}</div>
                <div style={styles.cell}>Bs. {p.total_bs ? p.total_bs.toFixed(2) : "0.00"}</div>
                
                <div style={styles.cell}>
                  {(p.estatus === 'Activo' || !p.estatus) ? (
                    <button 
                      style={styles.btnRecibir} 
                      onClick={(e) => handleRecibir(p, e)}
                    >
                      Recibir
                    </button>
                  ) : (
                    <span style={styles.estatusCerrado}>{p.estatus}</span>
                  )}
                </div>
              </div>
            ))
          )}
        </div>
      </div>

      {modalOpen && (
        <GestionPedido 
          pedido={pedidoSeleccionado} 
          onClose={() => {
            setModalOpen(false);
            cargarRegistros();
          }} 
          onSave={cargarRegistros} 
        />
      )}
    </div>
  );
};

export default PedidosComponente;
**************************************************

FILE: src/components/ProductosCRUD/ModalProducto.jsx
------------------------------
import React, { useState, useEffect } from 'react';
import { db } from '../../lib/db/database';

const ModalProducto = ({ producto, grupos, onClose, onSave }) => {
    const [formData, setFormData] = useState({
        id: '',
        nombre: '',
        grupo: '',
        stock: 0,
        imagen: ''
    });

    const [error, setError] = useState('');
    const [validando, setValidando] = useState(false);

    useEffect(() => {
        if (producto) {
            setFormData({
                id: producto.id.toString(),
                nombre: producto.nombre || '',
                grupo: producto.grupo || '',
                stock: producto.stock || 0,
                imagen: producto.imagen || ''
            });
        } else {
            setFormData({
                id: '',
                nombre: '',
                grupo: grupos.length > 0 ? grupos.nombre : '',
                stock: 0,
                imagen: ''
            });
        }
    }, [producto, grupos]);

    const validarIdExistente = async (id) => {
        try {
            const existe = await db.get('productos', parseInt(id));
            return !!existe;
        } catch (err) {
            console.error('Error validando ID:', err);
            return false;
        }
    };

    const handleSubmit = async (e) => {
        e.preventDefault();
        setError('');
        setValidando(true);

        if (!formData.id.trim()) {
            setError('El ID es requerido');
            setValidando(false);
            return;
        }

        const idNumero = parseInt(formData.id);
        if (isNaN(idNumero) || idNumero <= 0) {
            setError('El ID debe ser un n√∫mero positivo');
            setValidando(false);
            return;
        }

        if (!formData.nombre.trim()) {
            setError('El nombre es requerido');
            setValidando(false);
            return;
        }

        if (!formData.grupo) {
            setError('Debe seleccionar un grupo');
            setValidando(false);
            return;
        }

        if (formData.stock < 0) {
            setError('El stock no puede ser negativo');
            setValidando(false);
            return;
        }

        try {
            const dataToSave = {
                id: idNumero,
                nombre: formData.nombre,
                grupo: formData.grupo,
                stock: parseInt(formData.stock),
                imagen: formData.imagen,
                createdAt: producto ? producto.createdAt : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (producto) {
                const idCambiado = idNumero !== producto.id;
                if (idCambiado) {
                    const idExiste = await validarIdExistente(idNumero);
                    if (idExiste) {
                        setError(`El ID ${idNumero} ya est√° en uso por otro producto`);
                        setValidando(false);
                        return;
                    }
                    await db.del('productos', producto.id);
                    await db.add('productos', dataToSave);
                } else {
                    await db.put('productos', dataToSave);
                }
            } else {
                const idExiste = await validarIdExistente(idNumero);
                if (idExiste) {
                    setError(`El ID ${idNumero} ya est√° en uso`);
                    setValidando(false);
                    return;
                }
                await db.add('productos', dataToSave);
            }

            onSave();
            onClose();
        } catch (err) {
            setError('Error al guardar: ' + err.message);
            console.error(err);
        } finally {
            setValidando(false);
        }
    };

    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({
            ...prev,
            [name]: name === 'stock' || name === 'id' ?
                (value === '' ? '' : value.replace(/\D/g, '')) :
                value
        }));
    };

    return (
        <div style={{
            position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,
            backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',
            alignItems: 'center', justifyContent: 'center', zIndex: 1000, padding: '20px'
        }}>
            <div style={{
                backgroundColor: 'white', borderRadius: '8px', width: '100%',
                maxWidth: '500px', maxHeight: '90vh', display: 'flex',
                flexDirection: 'column', boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)'
            }}>
                <div style={{
                    display: 'flex', justifyContent: 'space-between', alignItems: 'center',
                    padding: '20px', borderBottom: '1px solid #eee', backgroundColor: '#f8f9fa'
                }}>
                    <h3 style={{ margin: 0, color: '#333' }}>
                        {producto ? '‚úèÔ∏è Editar Producto' : '‚ûï Nuevo Producto'}
                    </h3>
                    <button onClick={onClose} style={{
                        background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer',
                        color: '#666', width: '30px', height: '30px'
                    }}>√ó</button>
                </div>

                <form onSubmit={handleSubmit} style={{ padding: '20px', overflowY: 'auto' }}>
                    {error && (
                        <div style={{
                            backgroundColor: '#fee', color: '#c33', padding: '12px',
                            borderRadius: '4px', marginBottom: '20px', fontSize: '14px', border: '1px solid #fcc'
                        }}>
                            ‚ö†Ô∏è {error}
                        </div>
                    )}

                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', marginBottom: '20px' }}>
                        <div>
                            <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', color: '#333', fontSize: '14px' }}>ID *</label>
                            <input
                                type="text"
                                name="id"
                                value={formData.id}
                                onChange={handleChange}
                                style={{
                                    width: '100%', padding: '10px', border: '1px solid #ddd',
                                    borderRadius: '4px', fontSize: '14px', boxSizing: 'border-box',
                                    backgroundColor: validando ? '#f8f9fa' : 'white',
                                    color: '#333', cursor: validando ? 'not-allowed' : 'text'
                                }}
                                disabled={validando}
                            />
                        </div>
                        <div>
                            <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', color: '#333', fontSize: '14px' }}>Stock</label>
                            <input
                                type="number"
                                name="stock"
                                value={formData.stock}
                                onChange={handleChange}
                                style={{
                                    width: '100%', padding: '10px', border: '1px solid #ddd',
                                    borderRadius: '4px', fontSize: '14px', boxSizing: 'border-box',
                                    backgroundColor: validando ? '#f8f9fa' : 'white',
                                    color: '#333', cursor: validando ? 'not-allowed' : 'text'
                                }}
                                disabled={validando}
                            />
                        </div>
                    </div>

                    <div style={{ marginBottom: '20px' }}>
                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', color: '#333', fontSize: '14px' }}>Nombre del Producto *</label>
                        <input
                            type="text"
                            name="nombre"
                            value={formData.nombre}
                            onChange={handleChange}
                            style={{
                                width: '100%', padding: '10px', border: '1px solid #ddd',
                                borderRadius: '4px', fontSize: '14px', boxSizing: 'border-box',
                                backgroundColor: validando ? '#f8f9fa' : 'white',
                                color: '#333', cursor: validando ? 'not-allowed' : 'text'
                            }}
                            disabled={validando}
                        />
                    </div>

                    <div style={{ marginBottom: '20px' }}>
                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', color: '#333', fontSize: '14px' }}>Grupo *</label>
                        <select
                            name="grupo"
                            value={formData.grupo}
                            onChange={handleChange}
                            style={{
                                width: '100%', padding: '10px', border: '1px solid #ddd',
                                borderRadius: '4px', fontSize: '14px', 
                                backgroundColor: validando || grupos.length === 0 ? '#f8f9fa' : 'white',
                                color: '#333', cursor: (validando || grupos.length === 0) ? 'not-allowed' : 'pointer'
                            }}
                            disabled={validando || grupos.length === 0}
                        >
                            <option value="">Seleccionar grupo...</option>
                            {grupos.map(grupo => (
                                <option key={grupo.id} value={grupo.nombre}>
                                    {grupo.nombre} {grupo.precio > 0 ? `(+$${grupo.precio.toFixed(2)})` : ''}
                                </option>
                            ))}
                        </select>
                    </div>

                    <input type="hidden" name="imagen" value={formData.imagen} />

                    <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '20px' }}>
                        <button type="button" onClick={onClose} style={{
                            padding: '10px 24px', backgroundColor: '#6c757d', color: 'white',
                            border: 'none', borderRadius: '4px', cursor: 'pointer'
                        }}>Cancelar</button>
                        <button type="submit" style={{
                            padding: '10px 24px', backgroundColor: '#28a745', color: 'white',
                            border: 'none', borderRadius: '4px', fontWeight: 'bold', cursor: 'pointer'
                        }} disabled={validando}>
                            {validando ? '‚åõ Grabando...' : producto ? 'üíæ Guardar Cambios' : '‚úÖ Grabar Producto'}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    );
};

export default ModalProducto;
**************************************************

FILE: src/components/ProductosCRUD/ProductosCRUD.jsx
------------------------------
// src/components/ProductosCRUD/ProductosCRUD.jsx
import React, { useState, useEffect } from 'react';
import { db } from '../../lib/db/database';
import ModalProducto from './ModalProducto';

const ProductosCRUD = () => {
  const [productos, setProductos] = useState([]);
  const [grupos, setGrupos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const [modalOpen, setModalOpen] = useState(false);
  const [productoEditando, setProductoEditando] = useState(null);
  const [filtroGrupo, setFiltroGrupo] = useState('todos');

  // Cargar datos al montar el componente
  useEffect(() => {
    cargarDatos();
  }, []);

  const cargarDatos = async () => {
    try {
      setLoading(true);
      
      // Cargar productos y grupos en paralelo
      const [productosData, gruposData] = await Promise.all([
        db.getAll('productos'),
        db.getAll('grupos')
      ]);
      
      setProductos(productosData);
      setGrupos(gruposData);
    } catch (err) {
      setError('Error al cargar los datos: ' + err.message);
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  // Filtrar productos por grupo
  const productosFiltrados = filtroGrupo === 'todos' 
    ? productos 
    : productos.filter(p => p.grupo === filtroGrupo);

  const handleEditar = (producto) => {
    setProductoEditando(producto);
    setModalOpen(true);
  };

  const handleEliminar = async (producto) => {
    if (window.confirm(`¬øEst√°s seguro de eliminar el producto "${producto.nombre}"?`)) {
      try {
        await db.del('productos', producto.id);
        cargarDatos(); // Recargar la lista
      } catch (err) {
        setError('Error al eliminar: ' + err.message);
      }
    }
  };

  const handleNuevoProducto = () => {
    setProductoEditando(null);
    setModalOpen(true);
  };

  const handleGuardarExitoso = () => {
    cargarDatos(); // Recargar lista despu√©s de guardar
  };

  const getNombreGrupo = (grupoId) => {
    const grupo = grupos.find(g => g.nombre === grupoId);
    return grupo ? grupo.nombre : grupoId;
  };

  const getPrecioGrupo = (grupoId) => {
    const grupo = grupos.find(g => g.nombre === grupoId);
    return grupo ? grupo.precio : 0;
  };

  if (loading) {
    return <div style={styles.loading}>Cargando productos...</div>;
  }

  return (
    <div style={styles.container}>
      <h1 style={styles.title}>Administraci√≥n de Productos</h1>
      
      {error && (
        <div style={styles.errorAlert}>
          {error}
        </div>
      )}

      {/* Controles */}
      <div style={styles.controles}>
        <div style={styles.filtros}>
          <div style={styles.filtroGrupo}>
            <label htmlFor="filtro-grupo" style={styles.filtroLabel}>
              Filtrar por grupo:
            </label>
            <select
              id="filtro-grupo"
              value={filtroGrupo}
              onChange={(e) => setFiltroGrupo(e.target.value)}
              style={styles.select}
            >
              <option value="todos">Todos los grupos</option>
              {grupos.map(grupo => (
                <option key={grupo.id} value={grupo.nombre}>
                  {grupo.nombre}
                </option>
              ))}
            </select>
          </div>
        </div>

        <button 
          onClick={handleNuevoProducto}
          style={styles.nuevoButton}
        >
          + Nuevo Producto
        </button>
      </div>

      {/* Lista de productos */}
      <div style={styles.lista}>
        {productosFiltrados.length === 0 ? (
          <div style={styles.vacio}>
            {filtroGrupo === 'todos' 
              ? 'No hay productos registrados. ¬°Crea el primero!' 
              : `No hay productos en el grupo "${filtroGrupo}"`}
          </div>
        ) : (
          productosFiltrados.map(producto => (
            <div key={producto.id} style={styles.item}>
              <div style={styles.itemImagen}>
                {producto.imagen ? (
                  <img 
                    src={producto.imagen} 
                    alt={producto.nombre}
                    style={styles.imagen}
                    onError={(e) => e.target.style.display = 'none'}
                  />
                ) : (
                  <div style={styles.imagenPlaceholder}>
                    üì∑
                  </div>
                )}
              </div>

              <div style={styles.itemInfo}>
                <div style={styles.itemNombre}>{producto.nombre}</div>
                
                <div style={styles.itemDetalles}>
                  <div style={styles.detalle}>
                    <span style={styles.detalleLabel}>Grupo:</span>
                    <span style={styles.detalleValor}>
                      {getNombreGrupo(producto.grupo)}
                      {getPrecioGrupo(producto.grupo) > 0 && 
                        ` (+$${getPrecioGrupo(producto.grupo).toFixed(2)})`}
                    </span>
                  </div>
                  
                  <div style={styles.detalle}>
                    <span style={styles.detalleLabel}>Stock:</span>
                    <span style={{
                      ...styles.detalleValor,
                      color: producto.stock > 0 ? '#2e7d32' : '#c62828',
                      fontWeight: 'bold'
                    }}>
                      {producto.stock} unidad{producto.stock !== 1 ? 'es' : ''}
                    </span>
                  </div>
                  
                  <div style={styles.detalle}>
                    <span style={styles.detalleLabel}>ID:</span>
                    <span style={styles.detalleValor}>{producto.id}</span>
                  </div>
                  
                  {producto.createdAt && (
                    <div style={styles.detalle}>
                      <span style={styles.detalleLabel}>Creado:</span>
                      <span style={styles.detalleValor}>
                        {new Date(producto.createdAt).toLocaleDateString()}
                      </span>
                    </div>
                  )}
                </div>
              </div>

              <div style={styles.itemActions}>
                <button
                  onClick={() => handleEditar(producto)}
                  style={styles.btnEditar}
                >
                  Editar
                </button>
                <button
                  onClick={() => handleEliminar(producto)}
                  style={styles.btnEliminar}
                >
                  Eliminar
                </button>
              </div>
            </div>
          ))
        )}
      </div>

      {/* Resumen */}
      <div style={styles.resumen}>
        <div>
          Mostrando: <strong>{productosFiltrados.length}</strong> de <strong>{productos.length}</strong> productos
          {filtroGrupo !== 'todos' && ` (filtrado por: ${filtroGrupo})`}
        </div>
        <div style={styles.stockTotal}>
          Stock total: <strong>{productos.reduce((sum, p) => sum + p.stock, 0)}</strong> unidades
        </div>
      </div>

      {/* Modal */}
      {modalOpen && (
        <ModalProducto
          producto={productoEditando}
          grupos={grupos}
          onClose={() => setModalOpen(false)}
          onSave={handleGuardarExitoso}
        />
      )}
    </div>
  );
};

// Estilos
const styles = {
  container: { 
    padding: '20px', 
    maxWidth: '1000px', 
    margin: '0 auto',
    minHeight: '100vh'
  },
  title: { 
    marginBottom: '20px', 
    color: '#333',
    fontSize: '24px'
  },
  loading: { 
    padding: '40px', 
    textAlign: 'center',
    fontSize: '18px',
    color: '#666'
  },
  errorAlert: { 
    backgroundColor: '#fee', 
    color: '#c33', 
    padding: '12px', 
    borderRadius: '4px',
    marginBottom: '20px',
    border: '1px solid #fcc'
  },
  controles: {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'flex-end',
    marginBottom: '25px',
    flexWrap: 'wrap',
    gap: '15px'
  },
  filtros: {
    flex: 1
  },
  filtroGrupo: {
    display: 'flex',
    flexDirection: 'column',
    gap: '5px'
  },
  filtroLabel: {
    fontSize: '14px',
    color: '#555',
    fontWeight: '500'
  },
  select: {
    padding: '8px 12px',
    border: '1px solid #ddd',
    borderRadius: '4px',
    fontSize: '14px',
    maxWidth: '200px',
    backgroundColor: 'white'
  },
  nuevoButton: {
    padding: '10px 20px',
    backgroundColor: '#2196F3',
    color: 'white',
    border: 'none',
    borderRadius: '4px',
    cursor: 'pointer',
    fontSize: '14px',
    fontWeight: '500',
    whiteSpace: 'nowrap'
  },
  lista: { 
    border: '1px solid #ddd',
    borderRadius: '8px',
    overflow: 'hidden',
    marginBottom: '20px'
  },
  vacio: { 
    padding: '40px', 
    textAlign: 'center', 
    color: '#666',
    fontSize: '16px'
  },
  item: {
    display: 'flex',
    alignItems: 'center',
    padding: '15px',
    borderBottom: '1px solid #eee',
    backgroundColor: 'white',
    gap: '15px'
  },
  itemImagen: {
    width: '60px',
    height: '60px',
    flexShrink: 0
  },
  imagen: {
    width: '100%',
    height: '100%',
    objectFit: 'cover',
    borderRadius: '4px',
    border: '1px solid #eee'
  },
  imagenPlaceholder: {
    width: '100%',
    height: '100%',
    backgroundColor: '#f5f5f5',
    borderRadius: '4px',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    fontSize: '24px',
    color: '#999',
    border: '1px dashed #ddd'
  },
  itemInfo: {
    flex: 1,
    minWidth: 0 // Para que el texto no desborde
  },
  itemNombre: { 
    fontWeight: 'bold', 
    fontSize: '16px', 
    marginBottom: '8px',
    color: '#333'
  },
  itemDetalles: {
    display: 'grid',
    gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',
    gap: '8px',
    fontSize: '13px'
  },
  detalle: {
    display: 'flex',
    gap: '5px'
  },
  detalleLabel: {
    color: '#666',
    fontWeight: '500'
  },
  detalleValor: {
    color: '#333'
  },
  itemActions: { 
    display: 'flex', 
    gap: '10px',
    flexShrink: 0
  },
  btnEditar: {
    padding: '8px 16px',
    backgroundColor: '#2196F3',
    color: 'white',
    border: 'none',
    borderRadius: '4px',
    cursor: 'pointer',
    fontSize: '14px',
    whiteSpace: 'nowrap'
  },
  btnEliminar: {
    padding: '8px 16px',
    backgroundColor: '#f44336',
    color: 'white',
    border: 'none',
    borderRadius: '4px',
    cursor: 'pointer',
    fontSize: '14px',
    whiteSpace: 'nowrap'
  },
  resumen: {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: '15px',
    backgroundColor: '#f8f9fa',
    borderRadius: '8px',
    fontSize: '14px',
    color: '#555',
    flexWrap: 'wrap',
    gap: '10px'
  },
  stockTotal: {
    fontWeight: 'bold',
    color: '#1976d2'
  }
};

export default ProductosCRUD;
**************************************************

FILE: src/components/Sidebar.jsx
------------------------------

import React from 'react';
import { Link, useNavigate } from "react-router-dom";

export default function Sidebar({ isOpen, onClose }) {
    const navigate = useNavigate();

    const handleAdminAccess = (e) => {
        e.preventDefault();
        const pin = window.prompt("Ingrese el PIN de acceso:");
        // PIN definido en las fuentes [1]
        if (pin === "aaaaa") { 
            navigate("/Panel");
            onClose();
        } else {
            alert("Acceso denegado: PIN incorrecto.");
        }
    };

    return (
        <>
            {/* Overlay para cerrar al tocar fuera */}
            {isOpen && (
                <div onClick={onClose} style={styles.overlay} />
            )}

            {/* Contenedor del Men√∫ Lateral */}
            <div style={{
                ...styles.sidebar,
                transform: isOpen ? 'translateX(0)' : 'translateX(-100%)'
            }}>
                <div style={styles.header}>
                    <h3 style={styles.title}>Natura Menu</h3>
                    <button onClick={onClose} style={styles.closeBtn}>√ó</button>
                </div>

                <nav style={styles.nav}>
                    {/* Opci√≥n Inicio */}
                    <Link to="/" onClick={onClose} style={styles.link}>üè† Inicio</Link>
                    
                    {/* NUEVA OPCI√ìN: Pedidos */}
                    <Link to="/pedidos" onClick={onClose} style={styles.link}>üìã Pedidos</Link>
                    
                    {/* Opci√≥n Acerca de */}
                    <Link to="/about" onClick={onClose} style={styles.link}>‚ÑπÔ∏è Acerca de</Link>
                    
                    {/* Acceso Administrativo */}
                    <a onClick={handleAdminAccess} style={styles.link}>‚öôÔ∏è Panel de Control</a>
                </nav>
            </div>
        </>
    );
}

const styles = {
    sidebar: {
        position: 'fixed',
        top: 0,
        left: 0,
        height: '100vh',
        width: '250px',
        backgroundColor: '#ffffff',
        boxShadow: '2px 0 10px rgba(0,0,0,0.2)',
        zIndex: 1001,
        transition: 'transform 0.3s ease-in-out',
        display: 'flex',
        flexDirection: 'column',
    },
    overlay: {
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        backgroundColor: 'rgba(0,0,0,0.5)',
        zIndex: 1000,
    },
    header: {
        padding: '20px',
        borderBottom: '1px solid #eee',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        backgroundColor: '#00BFFF', // Color coherente con la identidad visual [2]
    },
    title: { 
        color: 'white', 
        margin: 0, 
        fontSize: '1.2rem' 
    },
    closeBtn: { 
        background: 'none', 
        border: 'none', 
        color: 'white', 
        fontSize: '2rem', 
        cursor: 'pointer' 
    },
    nav: { 
        display: 'flex', 
        flexDirection: 'column', 
        padding: '10px' 
    },
    link: {
        padding: '15px',
        textDecoration: 'none',
        color: '#333',
        fontSize: '1.1rem',
        borderBottom: '1px solid #f5f5f5',
        cursor: 'pointer',
        display: 'block'
    }
};
**************************************************

FILE: src/components/TasaForm.jsx
------------------------------
// src/components/TasaForm.jsx
import React, { useState, useEffect } from 'react';
import { db } from '../lib/db/database'; // Ajusta la ruta seg√∫n tu estructura

const TasaForm = () => {
  const [formData, setFormData] = useState({
    valor: ''
  });
  const [loading, setLoading] = useState(false);
  const [saving, setSaving] = useState(false);
  const [message, setMessage] = useState({ type: '', text: '' });

  // Cargar tasa existente al montar el componente
  useEffect(() => {
    cargarTasa();
  }, []);

  const cargarTasa = async () => {
    setLoading(true);
    try {
      // Buscar la tasa en la tabla config con clave 'tasa'
      const tasa = await db.get('config', 'tasa');
      if (tasa) {
        setFormData({ valor: tasa.valor.toString() });
      }
      setMessage({ type: '', text: '' });
    } catch (err) {
      setMessage({ 
        type: 'error', 
        text: 'Error al cargar la tasa: ' + err.message 
      });
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  const handleChange = (e) => {
    const { value } = e.target;
    // Permitir n√∫meros con decimales
    if (value === '' || /^\d*\.?\d*$/.test(value)) {
      setFormData({ valor: value });
      setMessage({ type: '', text: '' }); // Limpiar mensaje al cambiar
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    // Validaci√≥n b√°sica
    if (!formData.valor.trim()) {
      setMessage({ 
        type: 'error', 
        text: 'El valor de la tasa es requerido' 
      });
      return;
    }

    const valorNumero = parseFloat(formData.valor);
    if (isNaN(valorNumero) || valorNumero <= 0) {
      setMessage({ 
        type: 'error', 
        text: 'La tasa debe ser un n√∫mero positivo' 
      });
      return;
    }

    setSaving(true);
    setMessage({ type: '', text: '' });

    try {
      // Guardar en IndexedDB - tabla config, clave 'tasa'
      await db.put('config', {
        clave: 'tasa',
        valor: valorNumero,
        updatedAt: new Date().toISOString()
      });

      setMessage({ 
        type: 'success', 
        text: `Tasa guardada exitosamente: ${valorNumero.toFixed(4)}` 
      });
      
      // Opcional: Recargar despu√©s de guardar
      setTimeout(() => cargarTasa(), 500);
      
    } catch (err) {
      setMessage({ 
        type: 'error', 
        text: 'Error al guardar la tasa: ' + err.message 
      });
      console.error(err);
    } finally {
      setSaving(false);
    }
  };

  const handleLimpiar = () => {
    setFormData({ valor: '' });
    setMessage({ type: '', text: '' });
  };

  // Estilos en l√≠nea para simplicidad
  const styles = {
    container: {
      maxWidth: '500px',
      margin: '0 auto',
      padding: '20px'
    },
    form: {
      border: '1px solid #e5e7eb',
      borderRadius: '8px',
      padding: '20px',
      backgroundColor: 'white'
    },
    title: {
      fontSize: '20px',
      fontWeight: '600',
      marginBottom: '20px',
      color: '#1f2937'
    },
    label: {
      display: 'block',
      fontSize: '14px',
      fontWeight: '500',
      marginBottom: '8px',
      color: '#374151'
    },
    input: {
      width: '100%',
      padding: '10px',
      border: '1px solid #d1d5db',
      borderRadius: '6px',
      fontSize: '16px',
      boxSizing: 'border-box'
    },
    buttonContainer: {
      display: 'flex',
      justifyContent: 'flex-end',
      gap: '12px',
      marginTop: '20px'
    },
    button: {
      padding: '10px 20px',
      border: 'none',
      borderRadius: '6px',
      fontSize: '14px',
      fontWeight: '500',
      cursor: 'pointer',
      transition: 'background-color 0.2s'
    },
    buttonLimpiar: {
      backgroundColor: '#f3f4f6',
      color: '#374151',
      border: '1px solid #d1d5db'
    },
    buttonGuardar: {
      backgroundColor: '#3b82f6',
      color: 'white'
    },
    buttonDisabled: {
      backgroundColor: '#9ca3af',
      cursor: 'not-allowed'
    },
    message: {
      padding: '12px',
      borderRadius: '6px',
      marginBottom: '20px',
      fontSize: '14px'
    },
    messageSuccess: {
      backgroundColor: '#d1fae5',
      color: '#065f46',
      border: '1px solid #a7f3d0'
    },
    messageError: {
      backgroundColor: '#fee',
      color: '#991b1b',
      border: '1px solid #fecaca'
    },
    loading: {
      textAlign: 'center',
      padding: '20px',
      color: '#6b7280'
    }
  };

  if (loading) {
    return (
      <div style={styles.container}>
        <div style={styles.loading}>Cargando tasa...</div>
      </div>
    );
  }

  return (
    <div style={styles.container}>
      <form onSubmit={handleSubmit} style={styles.form}>
        <h2 style={styles.title}>
          Configurar Tasa de Cambio
        </h2>
        
        {/* Mensajes de estado */}
        {message.text && (
          <div style={{
            ...styles.message,
            ...(message.type === 'success' ? styles.messageSuccess : styles.messageError)
          }}>
            {message.text}
          </div>
        )}
        
        {/* Campo del valor */}
        <div>
          <label style={styles.label}>
            Valor de la Tasa *
          </label>
          <input
            type="text"
            name="valor"
            value={formData.valor}
            onChange={handleChange}
            required
            style={styles.input}
            placeholder="Ej: 36.50"
            disabled={saving}
          />
          <div style={{ fontSize: '12px', color: '#6b7280', marginTop: '4px' }}>
            Ingrese el valor num√©rico de la tasa (ej: 36.50 para tasa de cambio)
          </div>
        </div>
        
        {/* Botones */}
        <div style={styles.buttonContainer}>
          <button
            type="button"
            onClick={handleLimpiar}
            style={{
              ...styles.button,
              ...styles.buttonLimpiar,
              opacity: saving ? 0.5 : 1
            }}
            disabled={saving}
          >
            Limpiar
          </button>
          
          <button
            type="submit"
            style={{
              ...styles.button,
              ...styles.buttonGuardar,
              ...(saving ? styles.buttonDisabled : {}),
              opacity: saving ? 0.7 : 1
            }}
            disabled={saving}
          >
            {saving ? 'Guardando...' : 'Guardar Tasa'}
          </button>
        </div>
      </form>
      
      {/* Informaci√≥n adicional */}
      <div style={{ 
        marginTop: '20px', 
        padding: '15px', 
        backgroundColor: '#f9fafb', 
        borderRadius: '6px',
        fontSize: '13px',
        color: '#6b7280'
      }}>
        <div style={{ fontWeight: '500', marginBottom: '5px' }}>
          üí° Informaci√≥n:
        </div>
        <div>‚Ä¢ La tasa se guarda en IndexedDB (tabla: config, clave: tasa)</div>
        <div>‚Ä¢ Puedes recuperarla en cualquier momento con: <code>db.get('config', 'tasa')</code></div>
        <div>‚Ä¢ Formato almacenado: n√∫mero decimal (ej: 36.5)</div>
      </div>
    </div>
  );
};

export default TasaForm;
**************************************************

FILE: src/components/TasaImporter.jsx
------------------------------
// src/components/TasaImporter.jsx
import React, { useRef } from 'react';
import { useDataImport } from '../lib/db/hooks/useDataImport.js';
import tasaRepository from '../lib/db/repositories/TasaRepository.js';

const TasaImporter = ({ onImportComplete }) => {
  const fileInputRef = useRef(null);
  const { importing, result, importFromFile } = useDataImport();
  const [demoJson, setDemoJson] = useState('');

  const handleFileSelect = async (e) => {
    const file = e.target.files?.[0];
    if (!file) return;

    const result = await importFromFile(file);
    if (result.success && onImportComplete) {
      onImportComplete();
    }
  };

  const handleDemoImport = async () => {
    try {
      const tasasDemo = [
        {
          nombre: "Tasa de Cambio USD/EUR",
          valor: 0.92,
          moneda: "EUR",
          descripcion: "Tasa de cambio d√≥lar a euro",
          activo: true
        },
        {
          nombre: "Tasa de Cambio USD/GBP",
          valor: 0.79,
          moneda: "GBP",
          descripcion: "Tasa de cambio d√≥lar a libra",
          activo: true
        },
        {
          nombre: "Tasa de Inter√©s Referencial",
          valor: 4.25,
          moneda: "USD",
          descripcion: "Tasa de inter√©s anual",
          activo: true
        }
      ];

      const count = await tasaRepository.bulkImport(tasasDemo, { clearBeforeImport: false });
      
      if (onImportComplete) {
        onImportComplete();
      }
      
      alert(`‚úÖ ${count} tasas de demostraci√≥n importadas`);
    } catch (error) {
      alert(`‚ùå Error: ${error.message}`);
    }
  };

  const handleExport = async () => {
    try {
      const tasas = await tasaRepository.getAll(false);
      const dataStr = JSON.stringify(tasas, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      
      const link = document.createElement('a');
      link.href = URL.createObjectURL(dataBlob);
      link.download = `tasas_${new Date().toISOString().split('T')[0]}.json`;
      link.click();
    } catch (error) {
      alert(`Error al exportar: ${error.message}`);
    }
  };

  return (
    <div className="p-4 border rounded-lg space-y-4">
      <h3 className="font-bold">Importar/Exportar Tasas</h3>
      
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {/* Importar desde archivo */}
        <div className="space-y-2">
          <label className="block text-sm font-medium">
            Importar desde JSON
          </label>
          <input
            ref={fileInputRef}
            type="file"
            accept=".json"
            onChange={handleFileSelect}
            disabled={importing}
            className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
          />
        </div>
        
        {/* Datos de demostraci√≥n */}
        <div className="space-y-2">
          <label className="block text-sm font-medium">
            Datos de demostraci√≥n
          </label>
          <button
            onClick={handleDemoImport}
            disabled={importing}
            className="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400"
          >
            Cargar Datos Demo
          </button>
        </div>
        
        {/* Exportar */}
        <div className="space-y-2">
          <label className="block text-sm font-medium">
            Exportar datos
          </label>
          <button
            onClick={handleExport}
            className="w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600"
          >
            Exportar JSON
          </button>
        </div>
      </div>
      
      {/* Resultado de importaci√≥n */}
      {importing && (
        <div className="p-2 bg-blue-50 rounded text-center">
          <div className="inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-blue-500 mr-2"></div>
          Importando...
        </div>
      )}
      
      {result && (
        <div className={`p-3 rounded ${result.success ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
          {result.success 
            ? `‚úÖ ${result.count} tasas importadas exitosamente`
            : `‚ùå Error: ${result.error}`
          }
        </div>
      )}
    </div>
  );
};
export default TasaImporter;
**************************************************

FILE: src/components/TasaList.jsx
------------------------------
// src/components/TasaList.jsx
import React, { useState } from 'react';
import { useTasa } from '../lib/db/hooks/useTasa.js';

const TasaList = () => {
  const { 
    tasas, 
    tasaActiva, 
    loading, 
    error, 
    eliminarTasa, 
    loadHistorial,
    historial,
    stats 
  } = useTasa();
  
  const [busqueda, setBusqueda] = useState('');
  const [tasaSeleccionada, setTasaSeleccionada] = useState(null);

  const handleEliminar = async (id) => {
    if (window.confirm('¬øEst√°s seguro de desactivar esta tasa?')) {
      const result = await eliminarTasa(id);
      if (result.success) {
        alert('Tasa desactivada');
      } else {
        alert(`Error: ${result.error}`);
      }
    }
  };

  const handleVerHistorial = async (tasa) => {
    setTasaSeleccionada(tasa);
    await loadHistorial(tasa.id);
  };

  if (loading && tasas.length === 0) {
    return (
      <div className="p-4 text-center">
        <div className="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div>
        <p className="mt-2">Cargando tasas...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="p-4 bg-red-100 border border-red-400 text-red-700 rounded">
        Error: {error}
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Estad√≠sticas */}
      {stats && (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div className="p-4 bg-blue-50 rounded">
            <p className="text-sm text-gray-600">Total Tasas</p>
            <p className="text-2xl font-bold">{stats.total}</p>
          </div>
          <div className="p-4 bg-green-50 rounded">
            <p className="text-sm text-gray-600">Activas</p>
            <p className="text-2xl font-bold">{stats.activas}</p>
          </div>
          <div className="p-4 bg-yellow-50 rounded">
            <p className="text-sm text-gray-600">Promedio</p>
            <p className="text-2xl font-bold">{stats.promedio.toFixed(4)}</p>
          </div>
          <div className="p-4 bg-purple-50 rounded">
            <p className="text-sm text-gray-600">Rango</p>
            <p className="text-lg font-bold">
              {stats.minima.toFixed(4)} - {stats.maxima.toFixed(4)}
            </p>
          </div>
        </div>
      )}

      {/* Tasa Activa */}
      {tasaActiva && (
        <div className="p-4 bg-green-50 border border-green-200 rounded">
          <h3 className="font-bold text-green-800 mb-2">‚≠ê Tasa Activa Actual</h3>
          <div className="flex justify-between items-center">
            <div>
              <p className="text-lg font-semibold">{tasaActiva.nombre}</p>
              <p className="text-2xl font-bold">{tasaActiva.valor} {tasaActiva.moneda}</p>
            </div>
            <button
              onClick={() => handleVerHistorial(tasaActiva)}
              className="px-3 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200"
            >
              Ver Historial
            </button>
          </div>
        </div>
      )}

      {/* Buscador */}
      <div className="relative">
        <input
          type="text"
          placeholder="Buscar tasas..."
          value={busqueda}
          onChange={(e) => setBusqueda(e.target.value)}
          className="w-full p-2 pl-10 border rounded"
        />
        <span className="absolute left-3 top-2.5">üîç</span>
      </div>

      {/* Lista de Tasas */}
      <div className="space-y-3">
        <h3 className="text-lg font-semibold">
          Todas las Tasas ({tasas.length})
        </h3>
        
        {tasas.length === 0 ? (
          <p className="text-gray-500 text-center py-8">
            No hay tasas registradas
          </p>
        ) : (
          tasas.map(tasa => (
            <div 
              key={tasa.id} 
              className={`p-4 border rounded flex justify-between items-center ${
                !tasa.activo ? 'bg-gray-50 opacity-75' : ''
              }`}
            >
              <div>
                <div className="flex items-center space-x-2">
                  <h4 className="font-medium">{tasa.nombre}</h4>
                  {!tasa.activo && (
                    <span className="text-xs bg-gray-200 px-2 py-1 rounded">INACTIVA</span>
                  )}
                  {tasa.id === tasaActiva?.id && (
                    <span className="text-xs bg-green-200 px-2 py-1 rounded">ACTUAL</span>
                  )}
                </div>
                <p className="text-2xl font-bold my-1">{tasa.valor} {tasa.moneda}</p>
                {tasa.descripcion && (
                  <p className="text-sm text-gray-600">{tasa.descripcion}</p>
                )}
                <p className="text-xs text-gray-500">
                  Creada: {new Date(tasa.fechaCreacion).toLocaleDateString()}
                </p>
              </div>
              
              <div className="flex space-x-2">
                <button
                  onClick={() => handleVerHistorial(tasa)}
                  className="px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200"
                >
                  Historial
                </button>
                <button
                  onClick={() => handleEliminar(tasa.id)}
                  className="px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200"
                >
                  {tasa.activo ? 'Desactivar' : 'Eliminar'}
                </button>
              </div>
            </div>
          ))
        )}
      </div>

      {/* Modal de Historial */}
      {tasaSeleccionada && historial.length > 0 && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-auto">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="text-lg font-bold">
                Historial: {tasaSeleccionada.nombre}
              </h3>
              <button
                onClick={() => setTasaSeleccionada(null)}
                className="text-gray-500 hover:text-gray-700"
              >
                ‚úï
              </button>
            </div>
            
            <div className="p-4">
              <div className="space-y-3">
                {historial.map((item, index) => (
                  <div key={index} className="p-3 border rounded">
                    <div className="flex justify-between">
                      <span className="font-medium">{item.tipo}</span>
                      <span className="text-sm text-gray-500">
                        {new Date(item.fechaCambio).toLocaleString()}
                      </span>
                    </div>
                    {item.valorAnterior !== null && (
                      <div className="mt-2 text-sm">
                        <span className="text-gray-600">De: </span>
                        <span className="line-through">{item.valorAnterior}</span>
                        <span className="mx-2">‚Üí</span>
                        <span className="text-green-600 font-semibold">{item.valorNuevo}</span>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default TasaList;
**************************************************

FILE: src/data/data.json
------------------------------
{
  "productos": [
    {
      "id": 1,
      "nombre": "PARCHITA CREMOSA",
      "grupo": "cremoso",
      "stock": 0,
      "imagen": "/outputs/small/parchitacremosa_400.webp"
    },
    {
      "id": 2,
      "nombre": "PINA CREMOSA",
      "grupo": "cremoso",
      "stock": 1,
      "imagen": "/outputs/small/pinacremosa_400.webp"
    },
    {
      "id": 3,
      "nombre": "DURAZNO cremoso",
      "grupo": "cremoso",
      "stock": 1,
      "imagen": "/outputs/small/duraznocremoso_400.webp"
    },
    {
      "id": 4,
      "nombre": "FRESA CREMOSA",
      "grupo": "cremoso",
      "stock": 1,
      "imagen": "/outputs/small/fresa_400.webp"
    },
    {
      "id": 5,
      "nombre": "GUANA-GUANA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/guanaguana_400.webp"
    },
    {
      "id": 6,
      "nombre": "OREO CREMITA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/oreocremita_400.webp"
    },
    {
      "id": 7,
      "nombre": "PIE PARCHITA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/pieparchita_400.webp"
    },
    {
      "id": 8,
      "nombre": "PIE NARANJA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/pienaranja_400.webp"
    },
    {
      "id": 9,
      "nombre": "CHOCO OREO",
      "grupo": "premium",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 10,
      "nombre": "DALMATA",
      "grupo": "premium",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 11,
      "nombre": "VAINILLA",
      "grupo": "premium",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 12,
      "nombre": "COCO",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/coco_400.webp"
    },
    {
      "id": 13,
      "nombre": "PIE LIMON",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/pielimon_400.webp"
    },
    {
      "id": 14,
      "nombre": "CHOKO MILK",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/chokomilk_400.webp"
    },
    {
      "id": 15,
      "nombre": "AGUACATE",
      "grupo": "cremoso",
      "stock": 1,
      "imagen": "/outputs/small/aguacate_400.webp"
    },
    {
      "id": 16,
      "nombre": "MANI",
      "grupo": "fullcremoso",
      "stock": 0,
      "imagen": "/outputs/small/manicremoso_400.webp"
    },
    {
      "id": 17,
      "nombre": "FRESA BLANCO",
      "grupo": "premium",
      "stock": 1,
      "imagen": "/outputs/small/fresablanco_400.webp"
    },
    {
      "id": 26,
      "nombre": "CHOCO SUSY",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": "/outputs/small/chocosussy_400.webp"
    },
        {
      "id": 27,
      "nombre": "DURAZNO CITRICO",
      "grupo": "citrico",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 28,
      "nombre": "FRESA CITRICO",
      "grupo": "citrico",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 29,
      "nombre": "TAMARINDO",
      "grupo": "citrico",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 30,
      "nombre": "NATUGOMITAS",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 31,
      "nombre": "RON CON PASAS",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 32,
      "nombre": "MANGO BICHE",
      "grupo": "citrico",
      "stock": 1,
      "imagen": ""
    },
        {
      "id": 33,
      "nombre": "GUAYABA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": ""
    },
    {
      "id": 34,
      "nombre": "MORA",
      "grupo": "fullcremoso",
      "stock": 1,
      "imagen": ""
    }

  ]
}



**************************************************

FILE: src/data/grupos.json
------------------------------
{
  "cremoso": 0.5,
  "fullcremoso": 0.7,
  "premium": 1.05,
  "citrico": 0.4,
  "ninguno": 0.0
}
**************************************************

FILE: src/hooks/useLocalStorageList.js
------------------------------
import { useState, useEffect } from "react";

export function useLocalStorageList(key, initialValue) {
  const [data, setData] = useState(() => {
    const stored = localStorage.getItem(key);
    return stored ? JSON.parse(stored) : initialValue;
  });

  useEffect(() => {
    localStorage.setItem(key, JSON.stringify(data));
  }, [data, key]);

  return { data, setData };
}

**************************************************

FILE: src/index.css
------------------------------
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}

**************************************************

FILE: src/lib/db/database.js
------------------------------
import Dexie from 'dexie';
import 'dexie-export-import'; // Required for database backup functionality [1, 4]

export class NaturaDBClass {
    constructor() {
        // The database is named dbTasaBCV as per project requirements [1, 5]
        this.db = new Dexie('dbTasaBCV');

        // Version 1 - Initial schema [1]
        this.db.version(1).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio'
        });

        // Version 2 - Added configuration table [2]
        this.db.version(2).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio',
            config: 'clave'
        });

        // Version 3 - Added sales table for real-time tracking [2]
        this.db.version(3).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio',
            config: 'clave',
            ventas: '++id, productoId, nombre, grupo, precioUsd, fecha, cantidad'
        });

        // Version 4 - Added orders table with autoincremental ID [3]
        this.db.version(4).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio',
            config: 'clave',
            ventas: '++id, productoId, nombre, grupo, precioUsd, fecha, cantidad',
            pedidos: '++id, numero_pedido, fecha_pedido, tasa'
        });

        // Version 5 - Added cost field (costo_$) to groups for price management [3]
        this.db.version(5).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio, costo_$', 
            config: 'clave',
            ventas: '++id, productoId, nombre, grupo, precioUsd, fecha, cantidad',
            pedidos: '++id, numero_pedido, fecha_pedido, tasa'
        });

        // NEW Version 6 - Added status field (estatus) to orders for workflow management
        // Note: 'items' and totals are stored in the object but not indexed [History]
        this.db.version(6).stores({
            productos: 'id, nombre, grupo, stock, imagen, createdAt',
            grupos: '++id, nombre, precio, costo_$',
            config: 'clave',
            ventas: '++id, productoId, nombre, grupo, precioUsd, fecha, cantidad',
            pedidos: '++id, numero_pedido, fecha_pedido, tasa, estatus'
        });

        // Direct access references for components [6]
        this.productos = this.db.productos;
        this.grupos = this.db.grupos;
        this.config = this.db.config;
        this.ventas = this.db.ventas;
        this.pedidos = this.db.pedidos;
    }

    // Initialisation method called by the app entry points [6]
    async init() {
        if (!this.db.isOpen()) {
            await this.db.open();
            console.log("Database dbTasaBCV opened successfully.");
        }
        return this;
    }

    // Generic CRUD methods used across the application [6, 7]
    async add(table, data) {
        return await this.db[table].add(data);
    }

    async get(table, id) {
        return await this.db[table].get(id);
    }

    async getAll(table, filters = {}) {
        let query = this.db[table];
        for (const [key, value] of Object.entries(filters)) {
            query = query.where(key).equals(value);
        }
        return await query.toArray();
    }

    async put(table, data) {
        return await this.db[table].put(data);
    }

    async del(table, id) {
        await this.db[table].delete(id);
    }

    // Business specific logic for inventory management [7, 8]
    async updateStock(productoId, cantidad) {
        const producto = await this.get('productos', productoId);
        if (producto) {
            const nuevoStock = Math.max(0, producto.stock + cantidad);
            return await this.put('productos', {
                ...producto,
                stock: nuevoStock
            });
        }
        return null;
    }

    // Configuration helpers for BCV rate and settings [8, 9]
    async getConfigValue(clave) {
        const config = await this.get('config', clave);
        return config ? config.valor : null;
    }

    async setConfigValue(clave, valor) {
        return await this.put('config', {
            clave,
            valor,
            updatedAt: new Date().toISOString()
        });
    }
}

export const db = new NaturaDBClass();
**************************************************

FILE: src/lib/db/hooks/useTasa.js
------------------------------
// src/lib/db/hooks/useTasa.js
import { useState, useEffect, useCallback } from 'react';
import tasaRepository from '../repositories/TasaRepository.js';

export function useTasa() {
  const [tasas, setTasas] = useState([]);
  const [tasaActiva, setTasaActiva] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [historial, setHistorial] = useState([]);
  const [stats, setStats] = useState(null);

  // Cargar todas las tasas
  const loadTasas = useCallback(async () => {
    try {
      setLoading(true);
      const [tasasData, tasaActivaData, statsData] = await Promise.all([
        tasaRepository.getAll(),
        tasaRepository.getActive(),
        tasaRepository.getStats()
      ]);
      
      setTasas(tasasData);
      setTasaActiva(tasaActivaData);
      setStats(statsData);
      setError(null);
    } catch (err) {
      setError(err.message || 'Error al cargar tasas');
      console.error('Error en loadTasas:', err);
    } finally {
      setLoading(false);
    }
  }, []);

  // Cargar historial de una tasa
  const loadHistorial = useCallback(async (tasaId) => {
    try {
      const historialData = await tasaRepository.getHistorial(tasaId);
      setHistorial(historialData);
    } catch (err) {
      setError(err.message || 'Error al cargar historial');
    }
  }, []);

  // Crear nueva tasa
  const crearTasa = useCallback(async (tasaData) => {
    try {
      const id = await tasaRepository.create(tasaData);
      await loadTasas(); // Refrescar lista
      return { success: true, id };
    } catch (err) {
      const errorMsg = err.message || 'Error al crear tasa';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    }
  }, [loadTasas]);

  // Actualizar tasa
  const actualizarTasa = useCallback(async (id, updates) => {
    try {
      await tasaRepository.update(id, updates);
      await loadTasas(); // Refrescar lista
      return { success: true };
    } catch (err) {
      const errorMsg = err.message || 'Error al actualizar tasa';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    }
  }, [loadTasas]);

  // Eliminar tasa (soft delete)
  const eliminarTasa = useCallback(async (id) => {
    try {
      await tasaRepository.delete(id);
      await loadTasas(); // Refrescar lista
      return { success: true };
    } catch (err) {
      const errorMsg = err.message || 'Error al eliminar tasa';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    }
  }, [loadTasas]);

  // Buscar tasas
  const buscarTasas = useCallback(async (query) => {
    try {
      setLoading(true);
      const resultados = await tasaRepository.search(query);
      setTasas(resultados);
      setError(null);
    } catch (err) {
      setError(err.message || 'Error en b√∫squeda');
    } finally {
      setLoading(false);
    }
  }, []);

  // Cargar datos al inicio
  useEffect(() => {
    loadTasas();
  }, [loadTasas]);

  return {
    // Datos
    tasas,
    tasaActiva,
    historial,
    stats,
    
    // Estados
    loading,
    error,
    
    // Acciones CRUD
    crearTasa,
    actualizarTasa,
    eliminarTasa,
    buscarTasas,
    loadHistorial,
    
    // Utilidades
    refresh: loadTasas,
    resetError: () => setError(null),
    resetHistorial: () => setHistorial([])
  };
  
}

**************************************************

FILE: src/lib/db/hooks/useTasaBCV.js
------------------------------
// src/lib/db/hooks/useTasaBCV.js
import { useState, useEffect } from 'react';
import { db } from '../database.js';

export function useTasaBCV() {
  const [tasa, setTasa] = useState('');
  const [loading, setLoading] = useState(true);

  // Cargar tasa al inicio
  useEffect(() => {
    async function loadTasa() {
      try {
        // Buscar en la tabla 'config' donde clave = 'tasa'
        const config = await db.config.get('tasa');
        
        if (config && config.valor) {
          // Asegurar que siempre tenga punto decimal
          const valor = String(config.valor).replace(',', '.');
          setTasa(valor);
        } else {
          setTasa(''); // Vac√≠o si no existe
        }
      } catch (error) {
        console.error('Error cargando tasa:', error);
        setTasa('');
      } finally {
        setLoading(false);
      }
    }

    loadTasa();
  }, []);

  // Guardar tasa
  const saveTasa = async (valor) => {
    try {
      // Normalizar: reemplazar coma por punto
      const tasaNormalizada = String(valor).replace(',', '.');
      
      // Guardar como n√∫mero con punto decimal
      const tasaNumero = parseFloat(tasaNormalizada);
      
      // Verificar que sea un n√∫mero v√°lido
      if (isNaN(tasaNumero)) {
        console.error('Valor no es un n√∫mero:', valor);
        return false;
      }

      // Guardar en IndexedDB
      await db.config.put({
        clave: 'tasa',
        valor: tasaNumero, // Guardar como n√∫mero
        fechaActualizacion: new Date(),
        tipo: 'decimal'
      });

      console.log('Tasa guardada:', tasaNumero);
      return true;

    } catch (error) {
      console.error('Error guardando tasa:', error);
      return false;
    }
  };

  return {
    tasa,
    setTasa,
    saveTasa,
    loading
  };
}
**************************************************

FILE: src/lib/db/index.js
------------------------------
//export {default as db} from './db';
// export * from './hooks';
// export * from './repositories';

export { db } from './database.js';
**************************************************

FILE: src/lib/db/repositories/RepoRecommStructure.js
------------------------------
// Ejemplo de repositorio completo para Tasa
class TasaRepository {
  // === CRUD B√ÅSICO ===
  async create(data) { /* ... */ }
  async getById(id) { /* ... */ }
  async getAll() { /* ... */ }
  async update(id, data) { /* ... */ }
  async delete(id) { /* ... */ }
  
  // === CONSULTAS ESPEC√çFICAS ===
  async getActivas() { /* ... */ }
  async getByMoneda(moneda) { /* ... */ }
  async getByRangoValor(min, max) { /* ... */ }
  
  // === B√öSQUEDAS ===
  async search(term) { /* ... */ }
  async getFiltradas(filtros) { /* ... */ }
  
  // === AGREGACIONES ===
  async getEstadisticas() { /* ... */ }
  async getConteoPorMoneda() { /* ... */ }
  
  // === VALIDACIONES ===
  async validarTasa(data) { /* ... */ }
  async existeTasaSimilar(data) { /* ... */ }
  
  // === OPERACIONES MASIVAS ===
  async bulkInsert(tasas) { /* ... */ }
  async bulkUpdate(ids, updates) { /* ... */ }
  
  // === HISTORIAL/AUDITOR√çA ===
  async getHistorial(tasaId) { /* ... */ }
  async registrarCambio(tasaId, cambios) { /* ... */ }
  
  // === SINCRONIZACI√ìN ===
  async getCambiosPendientes() { /* ... */ }
  async marcarComoSincronizado(id) { /* ... */ }
  
  // === UTILIDADES ===
  async hacerBackup() { /* ... */ }
  async compactar() { /* ... */ }
  async getInfo() { /* ... */ }
}
**************************************************

FILE: src/lib/db/repositories/TasaRepository.js
------------------------------
// src/lib/db/repositories/TasaRepository.js
import { db } from "../database";

const TASA_KEY = 'tasa';

export const TasaRepository = {
  async getTasa() {
    // Busca en la tabla 'config' que es la correcta seg√∫n el esquema
    return await db.getConfigValue(TASA_KEY);
  },

  async saveTasa(valor) {
    // Usa el m√©todo setConfigValue definido en NaturaDBClass
    return await db.setConfigValue(TASA_KEY, Number(valor));
  },

  async convertirABs(valorenDolar) {
    const valor = await db.getConfigValue(TASA_KEY);
    
    if (!valor || typeof valor !== "number") {
      console.warn("Tasa no configurada en DB. Retornando 0.");
      return 0;
    }
    
    return valor * Number(valorenDolar || 0);
  }
};

**************************************************

FILE: src/lib/db/utils/Importer.js
------------------------------
// src/lib/db/utils/Importer.js
import { db } from '../database.js';

const Importer = {
    async ImportGrupos(jsonData) {
        try {
            // 1. CONVERTIR {clave:valor} a [{nombre, precio}]
            const gruposArray = Object.entries(jsonData).map(([nombre, precio]) => ({
                nombre: nombre,
                precio: Number(precio)
            }));

            // 2. LIMPIAR TABLA
            await db.grupos.clear();

            // 3. INSERTAR NUEVOS DATOS
            await db.grupos.bulkAdd(gruposArray);

            return {
                success: true,
                count: gruposArray.length,
                message: `${gruposArray.length} grupos importados`
            };

        } catch (error) {
            console.error('Error en importaci√≥n:', error);
            return {
                success: false,
                error: error.message
            };
        }
    },

    async ImportProductos(jsonData) {
        try {
            // ¬°CORRECCI√ìN! - jsonData ya es el array de productos
            // No necesitas Object.entries, ya viene como array
            const productosArray = jsonData.productos || jsonData;

            console.log('Productos a importar:', productosArray.length);
            console.log('Primer producto:', productosArray[0]);

            // 1. LIMPIAR TABLA
            await db.TBPRODUCTOS.clear();

            // 2. INSERTAR NUEVOS DATOS UNO POR UNO
            let importados = 0;
            for (const producto of productosArray) {
                try {
                    await db.productos.add({
                        id: producto.id,
                        nombre: producto.nombre,
                        grupo: producto.grupo,
                        stock: Number(producto.stock),
                        imagen: producto.imagen,
                        createdAt: new Date() // Agregar timestamp
                    });
                    importados++;
                } catch (error) {
                    console.error(`Error insertando producto ${producto.id}:`, error);
                }
            }

            return {
                success: true,
                count: importados,
                total: productosArray.length,
                message: `${importados} de ${productosArray.length} productos importados`
            };

        } catch (error) {
            console.error('Error en importaci√≥n de productos:', error);
            return {
                success: false,
                error: error.message
            };
        }
    }
};

export default Importer;
**************************************************

FILE: src/lib/db/utils/exportService.js
------------------------------
import { db } from '../database';
import 'dexie-export-import'; // Required to extend Dexie functionality [4]

export const exportDatabase = async () => {
    try {
        // Use db.db to access the actual Dexie instance defined in your class [1, 2]
        const blob = await db.db.export({
            prettyJson: true,
            progressCallback: ({ totalRows, completedRows }) => {
                console.log(`Export progress: ${completedRows}/${totalRows}`);
            }
        });

        // Fixed filename as requested to avoid string manipulation errors
        const fileName = 'backup_natura_ice.json';

        // Standard logic for triggering a download in Android browsers [5]
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = fileName;
        document.body.appendChild(link);
        link.click();

        // Cleanup resources
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        return { success: true };
    } catch (error) {
        console.error("Error exporting IndexedDB:", error);
        return { success: false, error };
    }
};
**************************************************

FILE: src/lib/db/utils/tasaUtil.js
------------------------------
// src/lib/db/utils/tasaUtil.js
import { db } from '../database.js'; // This is correct if the file is in /utils/ [1]

export async function getTasaBCV() {
  try {
    const valor = await db.getConfigValue('tasa');
    return valor ? parseFloat(valor) : null;
  } catch (error) {
    console.error('Error obteniendo tasa desde utils:', error);
    return null;
  }
}

export async function calcularEnDolares(bs, tasa = null) {
  try {
    if (!tasa) {
      tasa = await getTasaBCV();
    }

    if (!tasa || tasa <= 0) {
      console.warn('C√°lculo cancelado: Tasa inv√°lida');
      return null;
    }

    const dolares = parseFloat(bs) / parseFloat(tasa);
    return Math.round(dolares * 100) / 100;
  } catch (error) {
    console.error('Error calculando conversi√≥n:', error);
    return null;
  }
}

**************************************************

FILE: src/main.jsx
------------------------------
import React from "react";
import ReactDOM from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import App from "./App";
import "./index.css";

ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);

**************************************************

FILE: src/pages/About.jsx
------------------------------
export default function About() {
  return <h1>About Page</h1>;
}

**************************************************

FILE: src/pages/Admin.module.css
------------------------------
.adminContainer {
  padding: 20px;
  max-width: 700px;
  margin: 0 auto;
}

h2, h3 {
  text-align: center;
  color: #00BFFF;
}

/* AQUI AGREGAMOS COLOR NEGRO A TODO EL CONTENIDO DE LAS FILAS */
.item, 
.item p,
.item strong,
.info p {
  color: #000 !important;
}

.formBox {
  background: #fff;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  margin-bottom: 30px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.formBox input {
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #bbb;
}

.saveBtn {
  background: #00BFFF;
  border: none;
  padding: 10px;
  color: #fff;
  border-radius: 8px;
  margin-top: 10px;
  cursor: pointer;
  width: 100%;
}

.cancelBtn {
  background: #ccc;
  border: none;
  padding: 10px;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
}

.list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.item {
  background: #fff;
  padding: 12px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  display: flex;
  gap: 12px;
  align-items: center;
}

.item img {
  width: 70px;
  height: 70px;
  object-fit: contain;
  border-radius: 8px;
}

.info {
  flex: 1;
}

.actions button {
  margin-left: 6px;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  color: #000; /* aseguramos color visible */
}

.actions button:first-child {
  background: #FFB800;
}

.actions button:last-child {
  background: #FF5757;
  color: #fff;
}

/* ------------------- */
/*       MODAL         */
/* ------------------- */

.modalOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.modalContent {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  color: #000; /* texto negro dentro del modal */
}

**************************************************

FILE: src/pages/GruposPage.jsx
------------------------------
// src/pages/GruposPage.jsx
import React from 'react';
import GruposCRUD from '../components/GruposCRUD/GruposCRUD';

const GruposPage = () => {
  return (
    <div>
      <GruposCRUD />
    </div>
  );
};

export default GruposPage;
**************************************************

FILE: src/pages/Home.jsx
------------------------------
import { useState, useEffect } from 'react';
import { useNavigate } from "react-router-dom";
import { db } from '../lib/db/database.js'; 
import { getTasaBCV } from '../lib/db/utils/tasaUtil.js'; 
import styles from './Home.module.css';

function Home() {
    const [productos, setProductos] = useState([]);
    const [grupos, setGrupos] = useState([]);
    const [listaDeSeleccionados, setListaDeSeleccionados] = useState([]);
    const [tasa, setTasa] = useState(0);
    const [cargando, setCargando] = useState(true);
    
    // Filter state for the group selection [1]
    const [filtroGrupo, setFiltroGrupo] = useState('todos');
    
    const navigate = useNavigate();

    // Initial data load from IndexedDB and utilities [2-4]
    useEffect(() => {
        const cargarTodo = async () => {
            try {
                await db.init(); 
                const [p, g, t] = await Promise.all([
                    db.getAll('productos'),
                    db.getAll('grupos'),
                    getTasaBCV()
                ]);
                setProductos(p);
                setGrupos(g);
                setTasa(t || 0);
            } catch (err) {
                console.error("Error initializing Home:", err);
            } finally {
                setCargando(false);
            }
        };
        cargarTodo();
    }, []);

    // Logic to filter products by stock and group [4]
    const productosFiltrados = productos.filter(p => {
        const tieneStock = p.stock > 0;
        const coincideGrupo = filtroGrupo === 'todos' || p.grupo === filtroGrupo;
        return tieneStock && coincideGrupo;
    });

    // Handle recording the sale with confirmation prompt [5, 6]
    const handleGrabar = async () => {
        if (listaDeSeleccionados.length === 0) return;

        // REQUESTED CHANGE: Confirmation prompt before proceeding
        const confirmar = window.confirm(`¬øDesea procesar la venta de ${listaDeSeleccionados.length} helados?`);
        if (!confirmar) return; // Abort if user cancels [5]

        try {
            for (const item of listaDeSeleccionados) {
                const grupoInfo = grupos.find(g => g.nombre === item.grupo);
                const precioUsd = grupoInfo ? grupoInfo.precio : 0;

                // Record each item in the sales table [5]
                await db.add('ventas', {
                    productoId: item.id,
                    nombre: item.nombre,
                    grupo: item.grupo,
                    precioUsd: precioUsd,
                    cantidad: 1,
                    fecha: new Date().toISOString()
                });

                // Update inventory by subtracting 1 from stock [6, 7]
                await db.updateStock(item.id, -1);
            }

            // Refresh local state and clear selection [6]
            const productosActualizados = await db.getAll('productos');
            setProductos(productosActualizados);
            setListaDeSeleccionados([]);
            alert("‚úÖ Venta procesada con √©xito.");
        } catch (error) {
            console.error("Error saving sale:", error);
            alert("‚ùå Error al procesar la venta.");
        }
    };

    const seleccionarProducto = (producto) => {
        setListaDeSeleccionados(prev => [...prev, producto]);
    };

    const eliminarItem = (indexParaEliminar) => {
        setListaDeSeleccionados(prev => prev.filter((_, index) => index !== indexParaEliminar));
    };

    const calcularTotales = () => {
        let usd = 0;
        listaDeSeleccionados.forEach(item => {
            const grupoInfo = grupos.find(g => g.nombre === item.grupo);
            usd += grupoInfo ? grupoInfo.precio : 0;
        });
        return { usd, bs: usd * tasa }; 
    };

    const { usd, bs } = calcularTotales();

    if (cargando) return <div className={styles.loading}>Cargando tienda...</div>;

    return (
        <div className={styles.container}>
            
            {/* Group selection combo [8] */}
            <div style={{ marginTop: '15px', marginBottom: '15px', textAlign: 'center' }}>
                <label htmlFor="filtro-home" style={{ fontWeight: 'bold', marginRight: '10px', color: '#333' }}>
                    Filtrar por Grupo:
                </label>
                <select 
                    id="filtro-home"
                    value={filtroGrupo} 
                    onChange={(e) => setFiltroGrupo(e.target.value)}
                    style={{ padding: '8px', borderRadius: '8px', border: '1px solid #ccc' }}
                >
                    <option value="todos">Todos los helados</option>
                    {grupos.map(g => (
                        <option key={g.id} value={g.nombre}>{g.nombre}</option>
                    ))}
                </select>
            </div>
            
            {/* Product Grid [9] */}
            <div className={styles.grid}>
                {productosFiltrados.map(p => {
                    const grupoInfo = grupos.find(g => g.nombre === p.grupo);
                    const precio = grupoInfo ? grupoInfo.precio : 0;
                    
                    return (
                        <div key={p.id} className={styles.card} onClick={() => seleccionarProducto(p)}>
                            {/* Logic: If image exists, show image and name below; otherwise, name placeholder [9, 10] */}
                            {p.imagen && p.imagen.trim() !== "" ? (
                                <>
                                    <img src={p.imagen} alt={p.nombre} className={styles.imagen} />
                                    <div style={{ fontWeight: 'bold', fontSize: '14px', marginTop: '4px', color: '#333' }}>
                                        {p.nombre}
                                    </div>
                                </>
                            ) : (
                                <div style={{ 
                                    fontWeight: 'bold', fontSize: '14px', height: '100px', 
                                    display: 'flex', alignItems: 'center', justifyContent: 'center',
                                    textAlign: 'center', backgroundColor: '#f9f9f9', borderRadius: '8px',
                                    marginBottom: '10px', color: '#333', padding: '5px'
                                }}>
                                    {p.nombre}
                                </div>
                            )}
                            <p style={{ color: 'red', fontWeight: '600', margin: '5px 0 0 0' }}>
                                Id: {p.id} Existencia: {p.stock} Precio $: {precio.toFixed(2)}
                            </p> 
                        </div>
                    );
                })}
            </div>

            {/* Fixed Selection and Totals Panel [10, 11] */}
            <div className={styles.selectedContainer}>
                <div className={styles.selectedHeader}>
                    <span>Items Seleccionados ({listaDeSeleccionados.length}):</span>
                    <span>Tasa: {tasa.toFixed(2)}</span>
                </div>

                <div className={styles.selectedList}>
                    {listaDeSeleccionados.length === 0 ? (
                        <p style={{ color: '#666', fontSize: '0.9rem', textAlign: 'center' }}>
                            No hay helados seleccionados
                        </p>
                    ) : (
                        listaDeSeleccionados.map((item, index) => {
                            const grupoInfo = grupos.find(g => g.nombre === item.grupo);
                            const precioIndividual = grupoInfo ? grupoInfo.precio : 0;
                            return (
                                <div key={index} className={styles.selectedItem}>
                                    <span>#{item.id} - {item.nombre} (${precioIndividual.toFixed(2)})</span>
                                    <button onClick={(e) => { e.stopPropagation(); eliminarItem(index); }}>
                                        ELIM
                                    </button>
                                </div>
                            );
                        })
                    )}
                </div>

                <div style={{ marginTop: '8px', borderTop: '1px solid #ccc', paddingTop: '8px' }}>
                    <h3 style={{ margin: '0 0 8px 0', color: '#000' }}>
                        Total: ${usd.toFixed(2)} | Bs. {bs.toFixed(2)}
                    </h3>
                    <div style={{ display: 'flex', gap: '10px' }}>
                        <button className={styles.vaciarBtn} onClick={() => setListaDeSeleccionados([])}>
                            Vaciar
                        </button>
                        <button 
                            onClick={handleGrabar}
                            style={{ 
                                flex: 2, 
                                backgroundColor: '#28a745', 
                                color: 'white', 
                                border: 'none', 
                                borderRadius: '8px', 
                                fontWeight: 'bold',
                                cursor: 'pointer'
                            }}
                            disabled={listaDeSeleccionados.length === 0}
                        >
                            Grabar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
}

export default Home;
**************************************************

FILE: src/pages/Home.module.css
------------------------------
.title{
    text-align: center;
    font-size: 28px;
    color: #00BFFF;
}

/* Contenedor principal deja espacio abajo para la lista fija */
.container {
  padding-bottom: 260px; /* suficiente para lista de seleccionados + total + margen */
}

/* Grid principal */
.grid {
  display: grid;
  grid-template-columns: 1fr; /* una card por fila */
  gap: 16px;
  justify-content: center;
  padding: 0 12px; /* margen lateral */
}

/* Card individual */
.card {
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  padding: 12px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  width: 100%;        
  max-width: 100%;    
  margin: 0 auto;     
  min-height: 100px;  
  cursor: pointer; /* indica que es clickable */
  margin-right: 8px; /* evita que quede pegada al borde derecho */
}
/* Imagen dentro de la card */
.card img {
  width: 100%;
  height: auto;
  object-fit: contain;
  border-radius: 12px;
  margin-bottom: 12px;
}

/* Nombre del producto */
.card p {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0;
  color: red;
}

/* Hover effect */
.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

/* Contenedor fijo de seleccionados */
.selectedContainer {
  position: fixed;
  bottom: 10px;
  left: 12px;
  right: 12px;
  background-color: #f0f0f0;
  border-radius: 12px;
  padding: 8px;
  max-height: 240px; /* hasta 3 items + total */
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 999; /* encima de la grid */
}

/* Header selected */
.selectedHeader {
    display: flex;
    justify-content: space-between; /* Aligns head to left and rate to right */
    align-items: center;
    font-weight: bold;
    margin-bottom: 4px;
    color: #000;
}

/* Lista de items con scroll */
.selectedList {
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow-y: auto;
  max-height: 180px; /* scroll para m√°s de 3 items */
  padding-right: 4px; /* margen interno para scroll */
}

/* Item seleccionado */
.selectedItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fff;
  padding: 4px 8px; /* altura reducida */
  border-radius: 8px;
  color: #000;
  font-size: 0.95rem;
}

/* Bot√≥n eliminar dentro de cada item */
.selectedItem button {
  background: #FF5757;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 2px 6px;
  cursor: pointer;
}

/* Bot√≥n Vaciar fuera de la lista scrollable */
.vaciarBtn {
  margin-top: 6px;
  padding: 6px 12px;
  border: none;
  border-radius: 8px;
  background: #FF5757;
  color: #fff;
  cursor: pointer;
}

/* Modal overlay y content */
.modalOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modalContent {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  min-width: 300px;
}


**************************************************

FILE: src/pages/Lista.jsx
------------------------------
import { useLocalStorageList } from "../hooks/useLocalStorageList";

function Lista() {
  const { data } = useLocalStorageList("productos", []);

  return (
    <div>
      <h2>Lista de Helados</h2>

      <div style={{ display: "flex", flexWrap: "wrap", gap: "1rem" }}>
        {data.map((producto) => (
          <div key={producto.id} style={{ width: "150px" }}>
            <img
              src={producto.imagen}
              alt={producto.nombre}
              style={{ width: "100%", borderRadius: "8px" }}
            />
            <p>{producto.nombre}</p>
            <small>{producto.grupo}</small>
          </div>
        ))}
      </div>
    </div>
  );
}

export default Lista;

**************************************************

FILE: src/pages/NotFound.jsx
------------------------------
export default function NotFound() {
  return <h1>404 - P√°gina no encontrada</h1>;
}

**************************************************

FILE: src/pages/Pedidos.jsx
------------------------------
// src/pages/Pedidos.jsx
import React from 'react';
import PedidosComponente from '../components/Pedidos';

const PedidosPage = () => {
  return (
    <main>
      <PedidosComponente />
    </main>
  );
};

export default PedidosPage;
**************************************************

FILE: src/pages/ProductosPage.jsx
------------------------------
// src/pages/ProductosPage.jsx
import React from 'react';
import ProductosCRUD from '../components/ProductosCRUD/ProductosCRUD';

const ProductosPage = () => {
  return (
    <div>
      <ProductosCRUD />
    </div>
  );
};

export default ProductosPage;
**************************************************

FILE: src/pages/TasaBCV.jsx
------------------------------
// src/pages/TasaBCV.jsx
import { useState } from 'react';
import { useTasaBCV } from "../lib/db/hooks/useTasaBCV";
import styles from './TasaBCV.module.css'; // Opcional

export default function TasaBCV() {
  const { tasa, setTasa, saveTasa, loading } = useTasaBCV();
  const [message, setMessage] = useState('');

  // Manejar cambio de input
  const handleChange = (e) => {
    let valor = e.target.value;
    
    // Permitir solo n√∫meros y un punto decimal
    valor = valor.replace(/[^0-9.]/g, '');
    
    // Asegurar solo un punto decimal
    const puntos = valor.split('.').length - 1;
    if (puntos > 1) {
      // Si hay m√°s de un punto, mantener solo el primero
      const partes = valor.split('.');
      valor = partes[0] + '.' + partes.slice(1).join('');
    }
    
    setTasa(valor);
  };

  // Manejar env√≠o del formulario
  const handleSubmit = async (e) => {
    e.preventDefault();
    
    if (!tasa.trim()) {
      setMessage('‚ö†Ô∏è Ingresa un valor para la tasa');
      return;
    }

    // Convertir a n√∫mero para validaci√≥n
    const tasaNumero = parseFloat(tasa.replace(',', '.'));
    
    if (isNaN(tasaNumero) || tasaNumero <= 0) {
      setMessage('‚ùå Ingresa un n√∫mero v√°lido mayor que 0');
      return;
    }

    setMessage('üíæ Guardando...');
    
    const success = await saveTasa(tasa);
    
    if (success) {
      setMessage(`‚úÖ Tasa BCV guardada: $${tasaNumero.toFixed(2)}`);
      
      // Limpiar mensaje despu√©s de 3 segundos
      setTimeout(() => setMessage(''), 3000);
    } else {
      setMessage('‚ùå Error al guardar la tasa');
    }
  };

  if (loading) {
    return (
      <div className={styles.container}>
        <div className={styles.loading}>‚è≥ Cargando tasa BCV...</div>
      </div>
    );
  }

  return (
    <div className={styles.container}>
      <h1 className={styles.title}>üí∞ Tasa BCV</h1>
      
      <div className={styles.currentRate}>
        {tasa ? (
          <>
            <span>Tasa actual: </span>
            <strong>${parseFloat(tasa).toFixed(2)}</strong>
          </>
        ) : (
          <span>No hay tasa configurada</span>
        )}
      </div>

      <form onSubmit={handleSubmit} className={styles.form}>
        <div className={styles.inputGroup}>
          <label htmlFor="tasa">Nueva Tasa BCV:</label>
          <input
            id="tasa"
            type="text"
            inputMode="decimal"
            pattern="[0-9]*[.]?[0-9]*"
            placeholder="Ej: 36.50"
            value={tasa}
            onChange={handleChange}
            className={styles.input}
          />
          <small className={styles.hint}>
            Usa punto decimal (ej: 36.50)
          </small>
        </div>

        {message && (
          <div className={`${styles.message} ${
            message.includes('‚úÖ') ? styles.success : 
            message.includes('‚ö†Ô∏è') ? styles.warning : 
            styles.error
          }`}>
            {message}
          </div>
        )}

        <button 
          type="submit" 
          className={styles.button}
          disabled={!tasa.trim()}
        >
          üíæ Guardar Tasa
        </button>
      </form>
    </div>
  );
}
**************************************************

FILE: src/pages/TasaBCV.module.css
------------------------------
/* src/pages/TasaBCV.module.css */
.container {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
  font-family: system-ui, -apple-system, sans-serif;
}

.title {
  color: #2c3e50;
  text-align: center;
  margin-bottom: 30px;
}

.currentRate {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 25px;
  text-align: center;
  border: 1px solid #e9ecef;
}

.currentRate strong {
  color: #28a745;
  font-size: 1.2em;
}

.form {
  background: white;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.inputGroup {
  margin-bottom: 20px;
}

.inputGroup label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  color: #495057;
}

.input {
  width: 100%;
  padding: 12px 15px;
  font-size: 16px;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  box-sizing: border-box;
  transition: border-color 0.3s;
}

.input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
}

.hint {
  display: block;
  margin-top: 5px;
  color: #6c757d;
  font-size: 0.9em;
}

.button {
  width: 100%;
  padding: 14px;
  background: #28a745;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

.button:hover:not(:disabled) {
  background: #218838;
}

.button:disabled {
  background: #6c757d;
  cursor: not-allowed;
  opacity: 0.7;
}

.message {
  padding: 12px 15px;
  border-radius: 6px;
  margin-bottom: 20px;
  text-align: center;
  font-weight: 500;
}

.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.warning {
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffeaa7;
}

.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.loading {
  text-align: center;
  padding: 50px;
  font-size: 1.2em;
  color: #6c757d;
}
**************************************************

FILE: vite.config.js
------------------------------
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    react({
      babel: {
        plugins: [['babel-plugin-react-compiler']],
      },
    }),
  ],
})



**************************************************